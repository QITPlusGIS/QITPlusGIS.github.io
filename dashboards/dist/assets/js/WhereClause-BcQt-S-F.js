import{b as q,n as Q,t as $s,i as Ye,d as ce,e as fe,m as Ds}from"./TimeOnly-LdAwpTO1.js";import{az as sn,ff as J,by as Ps,a5 as en}from"./uuid-De2V3pkO.js";var d;(function(i){i.InvalidFunctionParameters="InvalidFunctionParameters",i.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",i.UnsupportedSqlFunction="UnsupportedSqlFunction",i.UnsupportedOperator="UnsupportedOperator",i.UnsupportedSyntax="UnsupportedSyntax",i.UnsupportedIsRhs="UnsupportedIsRhs",i.UnsupportedIsLhs="UnsupportedIsLhs",i.InvalidDataType="InvalidDataType",i.CannotCastValue="CannotCastValue",i.FunctionNotRecognized="FunctionNotRecognized",i.InvalidTime="InvalidTime",i.InvalidParameterCount="InvalidParameterCount",i.InvalidTimeStamp="InvalidTimeStamp",i.InvalidDate="InvalidDate",i.InvalidOperator="InvalidOperator",i.IllegalInterval="IllegalInterval",i.YearMonthIntervals="YearMonthIntervals",i.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",i.MissingStatisticParameters="MissingStatisticParameters"})(d||(d={}));const Ls={[d.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[d.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[d.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.UnsupportedOperator]:"Unsupported operator - {operator}",[d.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.UnsupportedSqlFunction]:"Sql function not found = {function}",[d.InvalidDataType]:"Invalid sql data type",[d.InvalidDate]:"Invalid date encountered",[d.InvalidOperator]:"Invalid operator encountered",[d.InvalidTime]:"Invalid time encountered",[d.IllegalInterval]:"Illegal interval",[d.FunctionNotRecognized]:"Function not recognized",[d.InvalidTimeStamp]:"Invalid timestamp encountered",[d.InvalidParameterCount]:"Invalid parameter count for call to {name}",[d.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[d.YearMonthIntervals]:"Year-Month Intervals not supported",[d.CannotCastValue]:"Cannot cast value to the required data type"};let v=class ln extends Error{constructor(r,u){super(sn(Ls[r],u)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,ln)}};var W;(function(i){i.NeverReach="NeverReach",i.NotImplemented="NotImplemented",i.Cancelled="Cancelled",i.InvalidStatResponse="InvalidStatResponse",i.InvalidRequest="InvalidRequest",i.RequestFailed="RequestFailed",i.MissingFeatures="MissingFeatures",i.AggregationFieldNotFound="AggregationFieldNotFound",i.DataElementsNotFound="DataElementsNotFound"})(W||(W={}));const _s={[W.Cancelled]:"Cancelled",[W.InvalidStatResponse]:"Invalid statistics response from service",[W.InvalidRequest]:"Invalid request",[W.RequestFailed]:"Request failed - {reason}",[W.MissingFeatures]:"Missing features",[W.AggregationFieldNotFound]:"Aggregation field not found",[W.DataElementsNotFound]:"Data elements not found on service",[W.NeverReach]:"Encountered unreachable logic",[W.NotImplemented]:"Not implemented"};let uc=class cn extends Error{constructor(r,u){super(sn(_s[r],u)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,cn)}};function tn(i){return Number.isNaN(i)||i===0?i:Math.trunc(i)}class H{constructor(r){this._timeStampOffset=r,this._date=null}toDateTime(){return this._date??=J.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return tn(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return tn(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return H.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(r){return new H(J.fromJSDate(r).toISO({includeOffset:!0}))}static fromDateTime(r){return new H(r.toISO({includeOffset:!0}))}static fromParts(r,u,c=0,l=0,w=0,h=0,t=0,S=!1,C=0,L=0){const V=`${r.toString().padStart(4,"0")}-${u.toString().padStart(2,"0")}-${c.toString().padStart(2,"0")}`;let z="";h<10&&(z="0");let N=`${l.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}:${z+h.toString()}`;t!==0&&(N+="."+t.toString().padStart(3,"0"));const x=`${S?"-":"+"}${C.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`;return new H(V+"T"+N+x)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let r=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return r&&(r=r.replace(".000","")),r}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(r){const u=this.toDateTime().plus(r);return H.fromDateTime(u)}}function Rs(i,r){const u=fn[i.toLowerCase()];if(u==null)throw new v(d.FunctionNotRecognized);if(r.length<u.minParams||r.length>u.maxParams)throw new v(d.InvalidParameterCount,{name:i.toUpperCase()});return u.evaluate(r)}function nn(i,r){const u=fn[i.toLowerCase()];return u!=null&&r>=u.minParams&&r<=u.maxParams}const fn={min:{minParams:1,maxParams:1,evaluate:i=>rn(i[0],"min")},max:{minParams:1,maxParams:1,evaluate:i=>rn(i[0],"max")},avg:{minParams:1,maxParams:1,evaluate:i=>dn(i[0])},sum:{minParams:1,maxParams:1,evaluate:i=>Us(i[0])},stddev:{minParams:1,maxParams:1,evaluate:i=>Js(i[0])},count:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].length},var:{minParams:1,maxParams:1,evaluate:i=>pn(i[0])}};function dn(i){if(i===null)return null;let r=0,u=0;for(let c=0;c<i.length;c++){const l=i[c];if(l!==null){if(!Xe(l))throw new v(d.InvalidValueForAggregateFunction);u++,r+=l}}return u===0?null:r/i.length}function Xe(i){return typeof i=="number"}function rn(i,r){if(i===null)return null;let u=null,c=null;for(const l of i){let w=l;w=l instanceof q||l instanceof Q?l.toNumber():l instanceof J?l.toMillis():l instanceof H?l.toMilliseconds():l,(u===null||r==="max"&&c!==null&&w!==null&&c<=w||r==="min"&&c!==null&&w!==null&&c>=w)&&(u=l,c=w)}return u}function Us(i){if(i===null)return null;let r=0;for(let u=0;u<i.length;u++){const c=i[u];if(c!==null){if(!Xe(c))throw new v(d.InvalidValueForAggregateFunction);r+=c}}return r}function Js(i){if(i===null)return null;const r=pn(i);return r===null?null:Math.sqrt(r)}function pn(i){if(i===null||(i=i.filter((c=>c!==null))).length===0)return null;const r=dn(i);if(r===null)return null;let u=0;for(const c of i){if(!Xe(c))throw new v(d.InvalidValueForAggregateFunction);u+=(r-c)**2}return u/(i.length-1)}class A{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(r){if(r.precision!==null||r.secondary!==null)throw new v(d.PrimarySecondaryQualifiers)}static _parseSecondsComponent(r,u){if(u.includes(".")){const c=u.split(".");r.second=parseFloat(c[0]),r.millis=parseInt(c[1],10)}else r.second=parseFloat(u)}static createFromMilliseconds(r){const u=new A;return u.second=r/1e3,u}static createFromValueAndQualifer(r,u,c){let l=null;const w=new A;if(w.op=c==="-"?"-":"+",u.type==="interval-period"){A._fixDefaults(u);const h=new RegExp("^[0-9]{1,}$");if(u.period==="year"||u.period==="month")throw new v(d.YearMonthIntervals);if(u.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))throw new v(d.IllegalInterval);A._parseSecondsComponent(w,r)}else{if(!h.test(r))throw new v(d.IllegalInterval);w[u.period]=parseFloat(r)}}else{if(A._fixDefaults(u.start),A._fixDefaults(u.end),u.start.period==="year"||u.start.period==="month"||u.end.period==="year"||u.end.period==="month")throw new v(d.YearMonthIntervals);switch(u.start.period){case"day":switch(u.end.period){case"hour":if(l=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!l.test(r))throw new v(d.IllegalInterval);w[u.start.period]=parseFloat(r.split(" ")[0]),w[u.end.period]=parseFloat(r.split(" ")[1]);break;case"minute":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!l.test(r))throw new v(d.IllegalInterval);{w[u.start.period]=parseFloat(r.split(" ")[0]);const h=r.split(" ")[1].split(":");w.hour=parseFloat(h[0]),w.minute=parseFloat(h[1])}break;case"second":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new v(d.IllegalInterval);{w[u.start.period]=parseFloat(r.split(" ")[0]);const h=r.split(" ")[1].split(":");w.hour=parseFloat(h[0]),w.minute=parseFloat(h[1]),A._parseSecondsComponent(w,h[2])}break;default:throw new v(d.IllegalInterval)}break;case"hour":switch(u.end.period){case"minute":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!l.test(r))throw new v(d.IllegalInterval);w.hour=parseFloat(r.split(":")[0]),w.minute=parseFloat(r.split(":")[1]);break;case"second":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new v(d.IllegalInterval);{const h=r.split(":");w.hour=parseFloat(h[0]),w.minute=parseFloat(h[1]),A._parseSecondsComponent(w,h[2])}break;default:throw new v(d.IllegalInterval)}break;case"minute":if(u.end.period!=="second")throw new v(d.IllegalInterval);if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new v(d.IllegalInterval);{const h=r.split(":");w.minute=parseFloat(h[0]),A._parseSecondsComponent(w,h[1])}break;default:throw new v(d.IllegalInterval)}}return w}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const Vs=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,zs=/^(\d{1,2}):(\d{1,2})$/,Zs=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,vn=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,ks=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,Hs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,qs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,Ys=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function Ae(i,r){switch(r){case"system":case"local":case null:return J.fromJSDate(i);default:return r?.toLowerCase()==="unknown"?J.fromMillis(i.getTime(),{zone:$s.instance}):J.fromJSDate(i).setZone(r)}}function Z(i){return typeof i=="number"}function k(i){return typeof i=="string"||i instanceof String}function te(i){return i instanceof A}function j(i){return i instanceof Date}function M(i){return i instanceof J}function E(i){return i instanceof q}function D(i){return i instanceof Q}function F(i){return i instanceof H}function et(i){let r=Vs.exec(i);if(r!==null){const[,u,c,l]=r,w=Q.fromParts(parseInt(u,10),parseInt(c,10),parseInt(l,10),0);if(w!==null)return w;throw new v(d.InvalidTime)}if(r=zs.exec(i),r!==null){const[,u,c]=r,l=Q.fromParts(parseInt(u,10),parseInt(c,10),0,0);if(l!==null)return l;throw new v(d.InvalidTime)}if(r=Zs.exec(i),r!==null){const[,u,c,l,w]=r,h=Q.fromParts(parseInt(u,10),parseInt(c,10),parseInt(l,10),parseInt(w,10));if(h!==null)return h;throw new v(d.InvalidTime)}throw new v(d.InvalidTime)}function xe(i,r,u=!1){let c=ks.exec(i);if(c!==null){const[,l,w,h,t,S,C,L]=c,V=J.fromObject({year:parseInt(l,10),month:parseInt(w,10),day:parseInt(h,10),hour:parseInt(t,10),minute:parseInt(S,10),second:parseInt(C,10),millisecond:L?parseInt(L.replace(".",""),10):0},{zone:Ye(r)});if(V.isValid===!1)throw new v(d.InvalidTimeStamp);return V}if(c=Hs.exec(i),c!==null){const[,l,w,h,t,S,C,L,V,z,N]=c,x=H.fromParts(parseInt(l,10),parseInt(w,10),parseInt(h,10),parseInt(t,10),parseInt(S,10),parseInt(C,10),L?parseInt(L.replace(".",""),10):0,V==="-",parseInt(z,10),parseInt(N,10));if(x.isValid===!1)throw new v(d.InvalidTimeStamp);return x}if(c=qs.exec(i),c!==null){const[,l,w,h,t,S,C,L,V]=c,z=H.fromParts(parseInt(l,10),parseInt(w,10),parseInt(h,10),parseInt(t,10),parseInt(S,10),0,0,C==="-",parseInt(L,10),parseInt(V,10));if(z.isValid===!1)throw new v(d.InvalidTimeStamp);return z}if(c=Ys.exec(i),c!==null){const[,l,w,h,t,S]=c,C=J.fromObject({year:parseInt(l,10),month:parseInt(w,10),day:parseInt(h,10),hour:parseInt(t,10),minute:parseInt(S,10),second:0},{zone:Ye(r)});if(C.isValid===!1)throw new v(d.InvalidTimeStamp);return C}if(c=vn.exec(i),c!==null){const[,l,w,h]=c,t=J.fromObject({year:parseInt(l,10),month:parseInt(w,10),day:parseInt(h,10),hour:0,minute:0,second:0},{zone:Ye(r)});if(t.isValid===!1)throw new v(d.InvalidTimeStamp);return t}throw new v(d.InvalidTimeStamp)}function mn(i,r){const u=vn.exec(i);if(u===null)try{return xe(i,r)}catch{throw new v(d.InvalidDate)}const[,c,l,w]=u,h=q.fromParts(parseInt(c,10),parseInt(l,10),parseInt(w,10));if(h===null)throw new v(d.InvalidDate);return h}function je(i){return!!M(i)||!!F(i)}function js(i){return!!M(i)||!!E(i)||!!F(i)||!!D(i)}function be(i){if(M(i))return i.toMillis();if(E(i))return i.toNumber();if(F(i))return i.toMilliseconds();throw new v(d.InvalidDataType)}function B(i,r,u,c){if(i==null||r==null)return null;if(Z(i)){if(Z(r))return G(i,r,u);if(k(r))return Bs(i,r,u);if(js(r))throw new v(d.InvalidOperator);if(E(r))throw new v(d.InvalidOperator)}else if(k(i)){if(Z(r))return Qs(i,r,u);if(k(r))return Ws(i,r,u);if(M(r))throw new v(d.InvalidOperator);if(E(r))throw new v(d.InvalidOperator);if(D(r))throw new v(d.InvalidOperator);if(F(r))throw new v(d.InvalidOperator)}else if(M(i)){if(je(r))return i instanceof J&&ce(i.zone)?r instanceof J&&ce(r.zone)===!1?i=fe(i,r.zone):r instanceof H&&(i=fe(i,r.toDateTime().zone)):r instanceof J&&ce(r.zone)&&(i instanceof J&&ce(i.zone)===!1?r=fe(r,i.zone):i instanceof H&&(r=fe(r,i.toDateTime().zone))),G(be(i),be(r),u);if(k(r))throw new v(d.InvalidOperator);if(E(r))return Gs(i,r,u);if(D(r))throw new v(d.InvalidOperator);if(Z(r))throw new v(d.InvalidOperator)}else if(E(i)){if(F(r))return el(i,r,u);if(M(r))return Xs(i,r,u);if(k(r))throw new v(d.InvalidOperator);if(E(r))return G(i.toNumber(),r.toNumber(),u);if(D(r))throw new v(d.InvalidOperator);if(Z(r))throw new v(d.InvalidOperator)}else if(D(i)){if(D(r))return G(i.toNumber(),r.toNumber(),u);if(k(r))throw new v(d.InvalidOperator);if(Z(r))throw new v(d.InvalidOperator);if(E(r))throw new v(d.InvalidOperator);if(je(r))throw new v(d.InvalidOperator)}else if(F(i)){if(je(r))return r instanceof J&&ce(r.zone)&&(r=fe(r,i.toDateTime().zone)),G(be(i),be(r),u);if(k(r))throw new v(d.InvalidOperator);if(E(r))return Ks(i,r,u);if(D(r))throw new v(d.InvalidOperator);if(Z(r))throw new v(d.InvalidOperator)}switch(u){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function G(i,r,u){switch(u){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function Bs(i,r,u){const c=parseFloat(r);if(!isNaN(c))return G(i,c,u);const l=i.toString();switch(u){case"<>":return l!==r;case"=":return l===r;case">":return l>r;case"<":return l<r;case">=":return l>=r;case"<=":return l<=r}}function Qs(i,r,u){const c=parseFloat(i);if(!isNaN(c))return G(c,r,u);const l=r.toString();switch(u){case"<>":return i!==l;case"=":return i===l;case">":return i>l;case"<":return i<l;case">=":return i>=l;case"<=":return i<=l}}function Ws(i,r,u){switch(u){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function Gs(i,r,u){const c=r.toDateTimeLuxon(i.zone);return G((i=i.startOf("day")).toMillis(),c.toMillis(),u)}function Ks(i,r,u){const c=r.toDateTimeLuxon(i.toDateTime().zone);return G((i=i.startOfDay()).toMilliseconds(),c.toMillis(),u)}function Xs(i,r,u){const c=i.toDateTimeLuxon(r.zone);return r=r.startOf("day"),G(c.toMillis(),r.toMillis(),u)}function el(i,r,u){const c=i.toDateTimeLuxon(r.toDateTime().zone);return r=r.startOfDay(),G(c.toMillis(),r.toMilliseconds(),u)}function tt(i,r,u){const c=wn[i.toLowerCase()];if(c==null)throw new v(d.FunctionNotRecognized);if(r.length<c.minParams||r.length>c.maxParams)throw new v(d.InvalidParameterCount,{name:i.toUpperCase()});return c.evaluate(r,u)}function tl(i,r){const u=wn[i.toLowerCase()];return u!=null&&r>=u.minParams&&r<=u.maxParams}function Me(i){return typeof i=="string"||i instanceof String}function Be(i){return!j(i)&&!E(i)&&!M(i)&&!D(i)&&!F(i)}function hn(i){return E(i)||D(i)?i.toString():F(i)?i.toSQLValue():M(i)?i.millisecond===0?i.toFormat("yyyy-LL-dd HH:mm:ss"):i.toSQL({includeOffset:!1}):j(i)?hn(J.fromJSDate(i)):i.toString()}function nl(i){if(j(i))return q.fromDateJS(i);if(M(i))return q.fromParts(i.year,i.month,i.day);if(E(i))return i;if(D(i))throw new v(d.CannotCastValue);if(F(i)&&q.fromParts(i.year,i.month,i.day)===null)throw new v(d.CannotCastValue);if(Me(i)){const r=q.fromReader(i);if(r!==null&&r.isValid)return r}throw new v(d.CannotCastValue)}function rl(i,r,u){if(j(i))return Ae(i,r);if(M(i))return i;if(E(i))return i.toDateTimeLuxon("unknown");if(D(i))throw new v(d.CannotCastValue);if(F(i))return i;if(Me(i))return xe(i,"unknown",u);throw new v(d.CannotCastValue)}function al(i){if(j(i))return Q.fromDateJS(i);if(M(i))return Q.fromDateTime(i);if(E(i))throw new v(d.CannotCastValue);if(D(i))return i;if(F(i))return Q.fromSqlTimeStampOffset(i);if(Me(i))return et(i);throw new v(d.CannotCastValue)}const wn={extract:{minParams:2,maxParams:2,evaluate:([i,r])=>{if(r==null)return null;if(j(r))switch(i.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(M(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new v(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(E(r))switch(i.toUpperCase()){case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new v(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(D(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour}else if(F(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":return r.timezoneOffsetHour;case"TIMEZONE_MINUTE":return r.timezoneOffsetMinutes}throw new v(d.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:i=>{if(i.length===2){const[r,u]=i;return r==null||u==null?null:r.toString().substring(u-1)}if(i.length===3){const[r,u,c]=i;return r==null||u==null||c==null?null:c<=0?"":r.toString().substring(u-1,u+c-1)}}},position:{minParams:2,maxParams:2,evaluate:([i,r])=>i==null||r==null?null:r.indexOf(i)+1},trim:{minParams:2,maxParams:3,evaluate:i=>{const r=i.length===3,u=r?i[1]:" ",c=r?i[2]:i[1];if(u==null||c==null)return null;const l=`(${Ps(u)})`;switch(i[0]){case"BOTH":return c.replaceAll(new RegExp(`^${l}*|${l}*$`,"g"),"");case"LEADING":return c.replaceAll(new RegExp(`^${l}*`,"g"),"");case"TRAILING":return c.replaceAll(new RegExp(`${l}*$`,"g"),"")}throw new v(d.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.abs(i[0])},ceiling:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.ceil(i[0])},floor:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.floor(i[0])},log:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.log(i[0])},log10:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.log(i[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.sin(i[0])},cos:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.cos(i[0])},tan:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.tan(i[0])},asin:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.asin(i[0])},acos:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.acos(i[0])},atan:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.atan(i[0])},sign:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0]>0?1:i[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:i=>i[0]==null||i[1]==null?null:i[0]**i[1]},mod:{minParams:2,maxParams:2,evaluate:i=>i[0]==null||i[1]==null?null:i[0]%i[1]},round:{minParams:1,maxParams:2,evaluate:i=>{const r=i[0],u=i.length===2?10**i[1]:1;return r==null?null:Math.round(r*u)/u}},truncate:{minParams:1,maxParams:2,evaluate:i=>i[0]==null?null:i.length===1?parseInt(i[0].toFixed(0),10):parseFloat(i[0].toFixed(i[1]))},char_length:{minParams:1,maxParams:1,evaluate:i=>Me(i[0])?i[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:i=>{let r="";for(let u=0;u<i.length;u++){if(i[u]==null)return null;r+=i[u].toString()}return r}},lower:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:i=>{for(const r of i)if(r!==null)return r;return null}},cosh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.cosh(i[0])},sinh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.sinh(i[0])},tanh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.tanh(i[0])},nullif:{minParams:2,maxParams:2,evaluate:(i,r)=>B(i[0],i[1],"=")?null:i[0]},cast:{minParams:2,maxParams:2,evaluate:(i,r)=>{const u=i[0],c=i[1];if(u===null)return null;switch(c.type){case"integer":{if(!Be(u))throw new v(d.CannotCastValue);const l=parseInt(u,10);if(isNaN(l))throw new v(d.CannotCastValue);return l}case"smallint":{if(!Be(u))throw new v(d.CannotCastValue);const l=parseInt(u,10);if(isNaN(l))throw new v(d.CannotCastValue);if(l>32767||l<-32767)throw new v(d.CannotCastValue);return l}case"float":case"real":{if(!Be(u))throw new v(d.CannotCastValue);const l=parseFloat(u);if(isNaN(l))throw new v(d.CannotCastValue);return l}case"time":return al(u);case"date":return nl(u);case"timestamp":return rl(u,r,c.withtimezone===!0);case"varchar":{const l=hn(u);if(l.length>c.size)throw new v(d.CannotCastValue);return l}default:throw new v(d.InvalidDataType)}}}};function In(i,r,u,c){if(i==="||")return tt("concat",[r,u],c);if(r===null||u===null)return null;if(Z(r)){if(Z(u))return nt(r,u,i);if(te(u))return dl(r,u,i);if(D(u))return Sl();if(E(u))return Ol();if(F(u))return Tl();if(M(u))return gl();if(k(u))return Cl(r,u,i);throw new v(d.InvalidOperator)}if(E(r)){if(Z(u))return wl(r,u,i);if(te(u))return pl(r,u,i);if(D(u))return $l();if(E(u))return Fl(r,u,i);if(F(u))return El(r,u,i);if(M(u))return Ml(r,u,i);if(k(u))return ql();throw new v(d.InvalidOperator)}if(D(r)){if(Z(u))return Il(r,u,i);if(te(u))return sl(r,u,i);if(D(u))return Vl();if(E(u))return Ul();if(F(u))return Jl();if(M(u))return Rl();if(k(u))return Yl();throw new v(d.InvalidOperator)}if(te(r)){if(Z(u))return fl(r,u,i);if(te(u))return cl(r,u,i);if(D(u))return ol(r,u,i);if(E(u))return ul(r,u,i);if(F(u))return ll(r,u,i);if(M(u))return il(r,u,i);if(k(u))return Al();throw new v(d.InvalidOperator)}if(M(r)){if(Z(u))return hl(r,u,i);if(te(u))return vl(r,u,i);if(D(u))return Hl();if(E(u))return Zl(r,u,i);if(F(u))return kl(r,u,i);if(M(u))return zl(r,u,i);if(k(u))return jl();throw new v(d.InvalidOperator)}if(F(r)){if(Z(u))return yl(r,u,i);if(te(u))return ml(r,u,i);if(D(u))return Dl();if(E(u))return Pl(r,u,i);if(F(u))return _l(r,u,i);if(M(u))return Ll(r,u,i);if(k(u))return Bl();throw new v(d.InvalidOperator)}if(k(r)){if(Z(u))return bl(r,u,i);if(te(u))return xl();if(D(u))return Ql();if(E(u))return Wl();if(F(u))return Kl();if(M(u))return Gl();if(k(u))return Nl(r,u,i);throw new v(d.InvalidOperator)}throw new v(d.InvalidOperator)}function nt(i,r,u){switch(u){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}throw new v(d.InvalidOperator)}function il(i,r,u){switch(u){case"+":return r.plus({milliseconds:i.valueInMilliseconds()});case"-":return i.valueInMilliseconds()-r.toMillis()}throw new v(d.InvalidOperator)}function ol(i,r,u){if(u==="+")return r.plus("milliseconds",i.valueInMilliseconds());throw new v(d.InvalidOperator)}function ul(i,r,u){if(u==="+")return r.plus("milliseconds",i.valueInMilliseconds());throw new v(d.InvalidOperator)}function sl(i,r,u){switch(u){case"+":return i.plus("milliseconds",r.valueInMilliseconds());case"-":return i.plus("milliseconds",-1*r.valueInMilliseconds())}throw new v(d.InvalidOperator)}function ll(i,r,u){if(u==="+")return r.addMilliseconds(i.valueInMilliseconds());throw new v(d.InvalidOperator)}function cl(i,r,u){switch(u){case"+":return A.createFromMilliseconds(i.valueInMilliseconds()+r.valueInMilliseconds());case"-":return A.createFromMilliseconds(i.valueInMilliseconds()-r.valueInMilliseconds());case"*":return A.createFromMilliseconds(i.valueInMilliseconds()*r.valueInMilliseconds());case"/":return A.createFromMilliseconds(i.valueInMilliseconds()/r.valueInMilliseconds())}throw new v(d.InvalidOperator)}function fl(i,r,u){switch(u){case"+":return A.createFromMilliseconds(i.valueInMilliseconds()+r);case"-":return A.createFromMilliseconds(i.valueInMilliseconds()-r);case"*":return A.createFromMilliseconds(i.valueInMilliseconds()*r);case"/":return A.createFromMilliseconds(i.valueInMilliseconds()/r)}throw new v(d.InvalidOperator)}function dl(i,r,u){switch(u){case"+":return A.createFromMilliseconds(i+r.valueInMilliseconds());case"-":return A.createFromMilliseconds(i-r.valueInMilliseconds());case"*":return A.createFromMilliseconds(i*r.valueInMilliseconds());case"/":return A.createFromMilliseconds(i/r.valueInMilliseconds())}throw new v(d.InvalidOperator)}function pl(i,r,u){switch(u){case"+":return i.plus("milliseconds",r.valueInMilliseconds());case"-":return i.plus("milliseconds",-1*r.valueInMilliseconds())}throw new v(d.InvalidOperator)}function vl(i,r,u){switch(u){case"+":return i.plus({milliseconds:r.valueInMilliseconds()});case"-":return i.minus({milliseconds:r.valueInMilliseconds()})}throw new v(d.InvalidOperator)}function ml(i,r,u){switch(u){case"+":return i.addMilliseconds(r.valueInMilliseconds());case"-":return i.addMilliseconds(-1*r.valueInMilliseconds())}throw new v(d.InvalidOperator)}function hl(i,r,u){const c=1e3*r*24*60*60;switch(u){case"+":return i.plus({milliseconds:c});case"-":return i.minus({milliseconds:c})}throw new v(d.InvalidOperator)}function wl(i,r,u){const c=1e3*r*24*60*60;switch(u){case"+":return i.plus("milliseconds",c);case"-":return i.plus("milliseconds",-1*c)}throw new v(d.InvalidOperator)}function Il(i,r,u){const c=1e3*r*24*60*60;switch(u){case"+":return i.plus("milliseconds",c);case"-":return i.plus("milliseconds",-1*c)}throw new v(d.InvalidOperator)}function gl(i,r,u){throw new v(d.InvalidOperator)}function yl(i,r,u){const c=1e3*r*24*60*60;switch(u){case"+":return i.addMilliseconds(c);case"-":return i.addMilliseconds(-1*c)}throw new v(d.InvalidOperator)}function Tl(i,r,u){throw new v(d.InvalidOperator)}function Sl(i,r,u){throw new v(d.InvalidOperator)}function Ol(i,r,u){throw new v(d.InvalidOperator)}function Cl(i,r,u){const c=parseFloat(r);if(isNaN(c))throw new v(d.InvalidOperator);return nt(i,c,u)}function bl(i,r,u){const c=parseFloat(i);if(isNaN(c))throw new v(d.InvalidOperator);return nt(c,r,u)}function Nl(i,r,u){if(u==="+")return i+r;throw new v(d.InvalidOperator)}function Al(i,r,u){throw new v(d.InvalidOperator)}function xl(i,r,u){throw new v(d.InvalidOperator)}function Ml(i,r,u){if(u==="-")return i.toDateTimeLuxon(r.zone).diff(r).as("days");throw new v(d.InvalidOperator)}function El(i,r,u){if(u==="-")return i.toDateTimeLuxon(r.toDateTime().zone).diff(r.toDateTime()).as("days");throw new v(d.InvalidOperator)}function Fl(i,r,u){if(u==="-")return i.toDateTimeLuxon("UTC").diff(r.toDateTimeLuxon("UTC")).as("days");throw new v(d.InvalidOperator)}function $l(i,r,u){throw new v(d.InvalidOperator)}function Dl(i,r,u){throw new v(d.InvalidOperator)}function Pl(i,r,u){if(u==="-")return i.toDateTime().diff(r.toDateTimeLuxon(i.toDateTime().zone)).as("days");throw new v(d.InvalidOperator)}function Ll(i,r,u){if(u==="-")return i.toDateTime().diff(r).as("days");throw new v(d.InvalidOperator)}function _l(i,r,u){if(u==="-")return i.toDateTime().diff(r.toDateTime()).as("days");throw new v(d.InvalidOperator)}function Rl(i,r,u){throw new v(d.InvalidOperator)}function Ul(i,r,u){throw new v(d.InvalidOperator)}function Jl(i,r,u){throw new v(d.InvalidOperator)}function Vl(i,r,u){throw new v(d.InvalidOperator)}function zl(i,r,u){if(u==="-")return i.diff(r).as("days");throw new v(d.InvalidOperator)}function Zl(i,r,u){if(u==="-")return i.diff(r.toDateTimeLuxon(i.zone)).as("days");throw new v(d.InvalidOperator)}function kl(i,r,u){if(u==="-")return i.diff(r.toDateTime()).as("days");throw new v(d.InvalidOperator)}function Hl(i,r,u){throw new v(d.InvalidOperator)}function ql(i,r,u){throw new v(d.InvalidOperator)}function Yl(i,r,u){throw new v(d.InvalidOperator)}function jl(i,r,u){throw new v(d.InvalidOperator)}function Bl(i,r,u){throw new v(d.InvalidOperator)}function Ql(i,r,u){throw new v(d.InvalidOperator)}function Wl(i,r,u){throw new v(d.InvalidOperator)}function Gl(i,r,u){throw new v(d.InvalidOperator)}function Kl(i,r,u){throw new v(d.InvalidOperator)}var an,on,Qe={exports:{}};Qe.exports,on=function(){function i(l,w){function h(){this.constructor=l}h.prototype=w.prototype,l.prototype=new h}function r(l,w,h,t){var S=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(S,r.prototype),S.expected=w,S.found=h,S.location=t,S.name="SyntaxError",S}function u(l,w,h){return h=h||" ",l.length>w?l:(w-=l.length,l+(h+=h.repeat(w)).slice(0,w))}function c(l,w){var h,t={},S=(w=w!==void 0?w:{}).grammarSource,C={start:Tt},L=Tt,V="!",z="=",N=">=",x=">",Y="<=",_="<>",On="<",at="!=",Ee="+",Fe="-",it="||",Cn="*",bn="/",Nn="@",ot="'",ut="N'",de="''",An=".",xn="null",Mn="true",En="false",Fn="in",$n="is",Dn="like",Pn="escape",Ln="not",_n="and",Rn="or",Un="between",Jn="from",Vn="for",zn="substring",Zn="extract",kn="trim",Hn="position",qn="timestamp",Yn="date",jn="time",Bn="leading",Qn="trailing",Wn="both",Gn="cast",Kn="as",Xn="integer",er="smallint",tr="float",nr="real",rr="varchar",ar="to",ir="interval",or="year",ur="timezone_hour",sr="timezone_minute",lr="month",cr="day",fr="hour",dr="minute",pr="second",vr="case",mr="end",hr="when",wr="then",Ir="else",gr=",",yr="(",Tr=")",st="`",Sr=/^[A-Za-z_\x80-\uFFFF]/,Or=/^[A-Za-z0-9_]/,lt=/^[A-Za-z0-9_.\x80-\uFFFF]/,Cr=/^["]/,ct=/^[^']/,br=/^[0-9]/,Nr=/^[eE]/,Ar=/^[+\-]/,xr=/^[ \t\n\r]/,ft=/^[^`]/,Mr=y("!",!1),dt=y("=",!1),Er=y(">=",!1),Fr=y(">",!1),$r=y("<=",!1),Dr=y("<>",!1),Pr=y("<",!1),Lr=y("!=",!1),$e=y("+",!1),De=y("-",!1),_r=y("||",!1),Rr=y("*",!1),Ur=y("/",!1),Jr=X([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),Vr=X([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),pt=X([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),zr=X(['"'],!1,!1),Zr=y("@",!1),vt=y("'",!1),kr=y("N'",!1),mt=y("''",!1),ht=X(["'"],!0,!1),Hr=y(".",!1),qr=X([["0","9"]],!1,!1),Yr=X(["e","E"],!1,!1),jr=X(["+","-"],!1,!1),Br=y("NULL",!0),Qr=y("TRUE",!0),Wr=y("FALSE",!0),Gr=y("IN",!0),Kr=y("IS",!0),Xr=y("LIKE",!0),ea=y("ESCAPE",!0),ta=y("NOT",!0),na=y("AND",!0),ra=y("OR",!0),aa=y("BETWEEN",!0),ia=y("FROM",!0),oa=y("FOR",!0),ua=y("SUBSTRING",!0),sa=y("EXTRACT",!0),la=y("TRIM",!0),ca=y("POSITION",!0),fa=y("TIMESTAMP",!0),da=y("DATE",!0),pa=y("TIME",!0),va=y("LEADING",!0),ma=y("TRAILING",!0),ha=y("BOTH",!0),wa=y("CAST",!0),Ia=y("AS",!0),ga=y("INTEGER",!0),ya=y("SMALLINT",!0),Ta=y("FLOAT",!0),Sa=y("REAL",!0),Oa=y("VARCHAR",!0),Ca=y("TO",!0),ba=y("INTERVAL",!0),Na=y("YEAR",!0),Aa=y("TIMEZONE_HOUR",!0),xa=y("TIMEZONE_MINUTE",!0),Ma=y("MONTH",!0),Ea=y("DAY",!0),Fa=y("HOUR",!0),$a=y("MINUTE",!0),Da=y("SECOND",!0),Pa=y("CASE",!0),La=y("END",!0),_a=y("WHEN",!0),Ra=y("THEN",!0),Ua=y("ELSE",!0),Ja=y(",",!1),Va=y("(",!1),za=y(")",!1),Za=X([" ","	",`
`,"\r"],!1,!1),wt=y("`",!1),It=X(["`"],!0,!1),ka=function(e){return e},Ha=function(e,a){var o={type:"expression-list"},s=xs(e,a);return o.value=s,o},qa=function(e,a){return le(e,a)},Ya=function(e,a){return le(e,a)},ja=function(e){return Ns("NOT",e)},Ba=function(e,a){return a==""||a==null||a==null?e:a.type=="arithmetic"?le(e,a.tail):Xt(a.op,e,a.right,a.escape)},Qa=function(e){return{type:"arithmetic",tail:e}},Wa=function(e,a){return{op:e+"NOT",right:a}},Ga=function(e,a){return{op:e,right:a}},Ka=function(e,a,o){return{op:"NOT"+e,right:{type:"expression-list",value:[a,o]}}},Xa=function(e,a,o){return{op:e,right:{type:"expression-list",value:[a,o]}}},ei=function(e){return e[0]+" "+e[2]},ti=function(e){return e[0]+" "+e[2]},ni=function(e,a,o){return{op:e,right:a,escape:o.value}},ri=function(e,a){return{op:e,right:a,escape:""}},ai=function(e,a){return{op:e,right:a}},ii=function(e){return{op:e,right:{type:"expression-list",value:[]}}},oi=function(e,a){return{op:e,right:a}},ui=function(e,a){return le(e,a)},si=function(e,a){return le(e,a)},li=function(e){return e.paren=!0,e},ci=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},fi=function(e){return{type:"column-reference",table:"",column:e,delimited:!0}},di=function(e){return e},pi=function(e,a){return e+a.join("")},vi=function(e,a){return e+a.join("")},mi=function(e){return e},hi=function(e){return e.join("")},wi=function(){return'"'},Ii=function(e){return{type:"parameter",value:e[1]}},gi=function(e,a){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},a]}}},yi=function(e,a,o){return{type:"function",name:"substring",args:{type:"expression-list",value:o?[e,a,o[2]]:[e,a]}}},Ti=function(e,a){return{type:"function",name:"cast",args:{type:"expression-list",value:[e,a]}}},Si=function(){return{type:"data-type",value:{type:"integer"}}},Oi=function(){return{type:"data-type",value:{type:"smallint"}}},Ci=function(){return{type:"data-type",value:{type:"float"}}},bi=function(){return{type:"data-type",value:{type:"real"}}},Ni=function(){return{type:"data-type",value:{type:"date"}}},Ai=function(){return{type:"data-type",value:{type:"timestamp"}}},xi=function(){return{type:"data-type",value:{type:"time"}}},Mi=function(e){return{type:"data-type",value:{type:"varchar",size:parseInt(e)}}},Ei=function(e,a,o){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},a,o]}}},Fi=function(e,a){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},a]}}},$i=function(e,a){return{type:"function",name:"position",args:{type:"expression-list",value:[e,a]}}},Di=function(e,a){return{type:"function",name:e,args:a||{type:"expression-list",value:[]}}},Pi=function(e){return e.type==="string"&&Ms(e.value),{type:"timestamp",value:e.value}},Li=function(e){return e.type==="string"&&Es(e.value),{type:"time",value:e.value}},_i=function(e,a,o){return{type:"interval",value:a,qualifier:o,op:e}},Ri=function(e,a){return{type:"interval",value:e,qualifier:a,op:""}},Ui=function(e,a){return{type:"interval-qualifier",start:e,end:a}},Ji=function(e,a){return{type:"interval-period",period:e.value,precision:a,secondary:null}},Vi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},zi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Zi=function(e,a){return{type:"interval-period",period:"second",precision:e,secondary:a}},ki=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Hi=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},qi=function(e,a){return{type:"interval-period",period:e.value,precision:a,secondary:null}},Yi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},ji=function(e,a){return{type:"interval-period",period:"second",precision:e,secondary:a}},Bi=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Qi=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Wi=function(){return{type:"string",value:"day"}},Gi=function(){return{type:"string",value:"hour"}},Ki=function(){return{type:"string",value:"minute"}},Xi=function(){return{type:"string",value:"month"}},eo=function(){return{type:"string",value:"year"}},to=function(e){return parseFloat(e)},no=function(e){return parseFloat(e)},ro=function(e){return e.type==="string"&&Fs(e.value),{type:"date",value:e.value}},ao=function(){return{type:"null",value:null}},io=function(){return{type:"boolean",value:!0}},oo=function(){return{type:"boolean",value:!1}},gt=function(){return"'"},uo=function(e){return{type:"string",value:e.join("")}},so=function(e,a){return{type:"case-expression",format:"simple",operand:e,clauses:a,else:null}},lo=function(e,a,o){return{type:"case-expression",format:"simple",operand:e,clauses:a,else:o.value}},co=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},fo=function(e,a){return{type:"case-expression",format:"searched",clauses:e,else:a.value}},po=function(e,a){return{type:"when-clause",operand:e,value:a}},vo=function(e,a){return{type:"when-clause",operand:e,value:a}},mo=function(e){return{type:"else-clause",value:e}},ho=function(e){return{type:"number",value:e}},wo=function(e,a,o){return parseFloat(e+a+o)},Io=function(e,a){return parseFloat(e+a)},go=function(e,a){return parseFloat(e+a)},yo=function(e){return parseFloat(e)},To=function(e,a){return e[0]+a},So=function(e){return"."+(e??"")},Oo=function(e,a){return e+a},Co=function(e){return e.join("")},bo=function(e,a){return"e"+(a===null?"":a)},No=function(){return"IN"},Ao=function(){return"IS"},xo=function(){return"LIKE"},Mo=function(){return"ESCAPE"},Eo=function(){return"NOT"},Fo=function(){return"AND"},$o=function(){return"OR"},Do=function(){return"BETWEEN"},Po=function(){return"FROM"},Lo=function(){return"FOR"},_o=function(){return"SUBSTRING"},Ro=function(){return"EXTRACT"},Uo=function(){return"TRIM"},Jo=function(){return"POSITION"},Vo=function(){return"TIMESTAMP"},zo=function(){return"DATE"},Zo=function(){return"TIME"},ko=function(){return"LEADING"},Ho=function(){return"TRAILING"},qo=function(){return"BOTH"},Yo=function(){return"CAST"},jo=function(){return"AS"},Bo=function(){return"INTEGER"},Qo=function(){return"SMALLINT"},Wo=function(){return"FLOAT"},Go=function(){return"REAL"},Ko=function(){return"VARCHAR"},Xo=function(){return"TO"},eu=function(){return"INTERVAL"},tu=function(){return"YEAR"},nu=function(){return"TIMEZONE_HOUR"},ru=function(){return"TIMEZONE_MINUTE"},au=function(){return"MONTH"},iu=function(){return"DAY"},ou=function(){return"HOUR"},uu=function(){return"MINUTE"},su=function(){return"SECOND"},lu=function(){return"CASE"},cu=function(){return"END"},fu=function(){return"WHEN"},du=function(){return"THEN"},pu=function(){return"ELSE"},vu=function(e){return e},mu=function(e){return e.join("")},n=0,m=0,pe=[{line:1,column:1}],K=0,Pe=[],f=0;if("startRule"in w){if(!(w.startRule in C))throw new Error(`Can't start parsing from rule "`+w.startRule+'".');L=C[w.startRule]}function Le(e,a){throw wu(e,a=a!==void 0?a:_e(m,n))}function y(e,a){return{type:"literal",text:e,ignoreCase:a}}function X(e,a,o){return{type:"class",parts:e,inverted:a,ignoreCase:o}}function hu(){return{type:"end"}}function yt(e){var a,o=pe[e];if(o)return o;for(a=e-1;!pe[a];)a--;for(o={line:(o=pe[a]).line,column:o.column};a<e;)l.charCodeAt(a)===10?(o.line++,o.column=1):o.column++,a++;return pe[e]=o,o}function _e(e,a,o){var s=yt(e),g=yt(a),O={source:S,start:{offset:e,line:s.line,column:s.column},end:{offset:a,line:g.line,column:g.column}};return O}function I(e){n<K||(n>K&&(K=n,Pe=[]),Pe.push(e))}function wu(e,a){return new r(e,null,null,a)}function Iu(e,a,o){return new r(r.buildMessage(e,a),e,a,o)}function Tt(){var e,a;return e=n,p(),(a=P())!==t?(p(),m=e,e=ka(a)):(n=e,e=t),e}function St(){var e,a,o,s,g,O,b,$;if(e=n,(a=P())!==t){for(o=[],s=n,g=p(),(O=Ce())!==t?(b=p(),($=P())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);s!==t;)o.push(s),s=n,g=p(),(O=Ce())!==t?(b=p(),($=P())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);m=e,e=Ha(a,o)}else n=e,e=t;return e}function P(){var e,a,o,s,g,O,b,$;if(e=n,(a=Re())!==t){for(o=[],s=n,g=p(),(O=Ut())!==t?(b=p(),($=Re())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);s!==t;)o.push(s),s=n,g=p(),(O=Ut())!==t?(b=p(),($=Re())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);m=e,e=qa(a,o)}else n=e,e=t;return e}function Re(){var e,a,o,s,g,O,b,$;if(e=n,(a=ve())!==t){for(o=[],s=n,g=p(),(O=Te())!==t?(b=p(),($=ve())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);s!==t;)o.push(s),s=n,g=p(),(O=Te())!==t?(b=p(),($=ve())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);m=e,e=Ya(a,o)}else n=e,e=t;return e}function ve(){var e,a,o,s,g;return e=n,(a=se())===t&&(a=n,l.charCodeAt(n)===33?(o=V,n++):(o=t,f===0&&I(Mr)),o!==t?(s=n,f++,l.charCodeAt(n)===61?(g=z,n++):(g=t,f===0&&I(dt)),f--,g===t?s=void 0:(n=s,s=t),s!==t?a=o=[o,s]:(n=a,a=t)):(n=a,a=t)),a!==t?(o=p(),(s=ve())!==t?(m=e,e=ja(s)):(n=e,e=t)):(n=e,e=t),e===t&&(e=gu()),e}function gu(){var e,a,o;return e=n,(a=ee())!==t?(p(),(o=yu())===t&&(o=null),m=e,e=Ba(a,o)):(n=e,e=t),e}function yu(){var e;return(e=Tu())===t&&(e=bu())===t&&(e=Ou())===t&&(e=Su())===t&&(e=Cu()),e}function Tu(){var e,a,o,s,g,O,b;if(e=n,a=[],o=n,s=p(),(g=Ot())!==t?(O=p(),(b=ee())!==t?o=s=[s,g,O,b]:(n=o,o=t)):(n=o,o=t),o!==t)for(;o!==t;)a.push(o),o=n,s=p(),(g=Ot())!==t?(O=p(),(b=ee())!==t?o=s=[s,g,O,b]:(n=o,o=t)):(n=o,o=t);else a=t;return a!==t&&(m=e,a=Qa(a)),e=a}function Ot(){var e;return l.substr(n,2)===N?(e=N,n+=2):(e=t,f===0&&I(Er)),e===t&&(l.charCodeAt(n)===62?(e=x,n++):(e=t,f===0&&I(Fr)),e===t&&(l.substr(n,2)===Y?(e=Y,n+=2):(e=t,f===0&&I($r)),e===t&&(l.substr(n,2)===_?(e=_,n+=2):(e=t,f===0&&I(Dr)),e===t&&(l.charCodeAt(n)===60?(e=On,n++):(e=t,f===0&&I(Pr)),e===t&&(l.charCodeAt(n)===61?(e=z,n++):(e=t,f===0&&I(dt)),e===t&&(l.substr(n,2)===at?(e=at,n+=2):(e=t,f===0&&I(Lr)))))))),e}function Su(){var e,a,o,s;return e=n,(a=_t())!==t?(p(),(o=se())!==t?(p(),(s=ee())!==t?(m=e,e=Wa(a,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=_t())!==t?(p(),(o=ee())!==t?(m=e,e=Ga(a,o)):(n=e,e=t)):(n=e,e=t)),e}function Ou(){var e,a,o,s,g,O;return e=n,(a=se())!==t?(p(),(o=Jt())!==t?(p(),(s=ee())!==t?(p(),(g=Te())!==t?(p(),(O=ee())!==t?(m=e,e=Ka(o,s,O)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Jt())!==t?(p(),(o=ee())!==t?(p(),(s=Te())!==t?(p(),(g=ee())!==t?(m=e,e=Xa(a,o,g)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ct(){var e,a,o,s,g;return e=n,a=n,(o=se())!==t?(s=p(),(g=Rt())!==t?a=o=[o,s,g]:(n=a,a=t)):(n=a,a=t),a!==t&&(m=e,a=ei(a)),(e=a)===t&&(e=Rt()),e}function Ue(){var e,a,o,s,g;return e=n,a=n,(o=se())!==t?(s=p(),(g=He())!==t?a=o=[o,s,g]:(n=a,a=t)):(n=a,a=t),a!==t&&(m=e,a=ti(a)),(e=a)===t&&(e=He()),e}function Cu(){var e,a,o,s;return e=n,(a=Ct())!==t?(p(),(o=ne())!==t?(p(),os()!==t?(p(),(s=ke())!==t?(m=e,e=ni(a,o,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Ct())!==t?(p(),(o=ne())!==t?(m=e,e=ri(a,o)):(n=e,e=t)):(n=e,e=t)),e}function bu(){var e,a,o,s;return e=n,(a=Ue())!==t?(p(),(o=R())!==t?(p(),(s=St())!==t?(p(),U()!==t?(m=e,e=ai(a,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Ue())!==t?(p(),(o=R())!==t?(p(),(s=U())!==t?(m=e,e=ii(a)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Ue())!==t?(p(),(o=Ze())!==t?(m=e,e=oi(a,o)):(n=e,e=t)):(n=e,e=t))),e}function ee(){var e,a,o,s,g,O,b,$;if(e=n,(a=Je())!==t){for(o=[],s=n,g=p(),(O=bt())!==t?(b=p(),($=Je())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);s!==t;)o.push(s),s=n,g=p(),(O=bt())!==t?(b=p(),($=Je())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);m=e,e=ui(a,o)}else n=e,e=t;return e}function bt(){var e;return l.charCodeAt(n)===43?(e=Ee,n++):(e=t,f===0&&I($e)),e===t&&(l.charCodeAt(n)===45?(e=Fe,n++):(e=t,f===0&&I(De)),e===t&&(l.substr(n,2)===it?(e=it,n+=2):(e=t,f===0&&I(_r)))),e}function Je(){var e,a,o,s,g,O,b,$;if(e=n,(a=Ve())!==t){for(o=[],s=n,g=p(),(O=Nt())!==t?(b=p(),($=Ve())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);s!==t;)o.push(s),s=n,g=p(),(O=Nt())!==t?(b=p(),($=Ve())!==t?s=g=[g,O,b,$]:(n=s,s=t)):(n=s,s=t);m=e,e=si(a,o)}else n=e,e=t;return e}function Nt(){var e;return l.charCodeAt(n)===42?(e=Cn,n++):(e=t,f===0&&I(Rr)),e===t&&(l.charCodeAt(n)===47?(e=bn,n++):(e=t,f===0&&I(Ur))),e}function Ve(){var e,a;return(e=zu())===t&&(e=Du())===t&&(e=Pu())===t&&(e=Ru())===t&&(e=Uu())===t&&(e=Lu())===t&&(e=Ju())===t&&(e=Gu())===t&&(e=Nu())===t&&(e=Ze())===t&&(e=n,R()!==t?(p(),(a=P())!==t?(p(),U()!==t?(m=e,e=li(a)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Nu(){var e,a;return e=n,(a=Au())!==t&&(m=e,a=ci(a)),(e=a)===t&&(e=n,(a=Mu())!==t&&(m=e,a=fi(a)),e=a),e}function Au(){var e,a;return e=n,(a=xu())!==t&&(m=e,a=di(a)),e=a}function xu(){var e,a,o,s;if(e=n,(a=ze())!==t){for(o=[],s=xt();s!==t;)o.push(s),s=xt();m=e,e=pi(a,o)}else n=e,e=t;return e}function At(){var e,a,o,s;if(e=n,(a=ze())!==t){for(o=[],s=T();s!==t;)o.push(s),s=T();m=e,e=vi(a,o)}else n=e,e=t;return e}function ze(){var e;return Sr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(Jr)),e}function T(){var e;return Or.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(Vr)),e}function xt(){var e;return lt.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(pt)),e}function Mu(){var e,a;return e=n,me()!==t?(a=Eu(),me()!==t?(m=e,e=mi(a)):(n=e,e=t)):(n=e,e=t),e}function Eu(){var e,a,o;for(e=n,a=[],o=Mt();o!==t;)a.push(o),o=Mt();return m=e,e=a=hi(a)}function Mt(){var e;return(e=$u())===t&&(e=Fu()),e}function Fu(){var e;return e=n,me()!==t&&me()!==t?(m=e,e=wi()):(n=e,e=t),e}function $u(){var e;return lt.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(pt)),e}function me(){var e;return Cr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(zr)),e}function Ze(){var e,a,o,s;return e=n,a=n,l.charCodeAt(n)===64?(o=Nn,n++):(o=t,f===0&&I(Zr)),o!==t&&(s=At())!==t?a=o=[o,s]:(n=a,a=t),a!==t&&(m=e,a=Ii(a)),e=a}function Du(){var e,a,o;return e=n,ls()!==t?(p(),R()!==t?(p(),(a=Vu())!==t?(p(),qe()!==t?(p(),(o=P())!==t?(p(),U()!==t?(m=e,e=gi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Pu(){var e,a,o,s,g,O,b;return e=n,ss()!==t?(p(),R()!==t?(p(),(a=P())!==t?(p(),qe()!==t?(p(),(o=P())!==t?(p(),s=n,(g=us())!==t?(O=p(),(b=P())!==t?s=g=[g,O,b,p()]:(n=s,s=t)):(n=s,s=t),s===t&&(s=null),(g=U())!==t?(m=e,e=yi(a,o,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Lu(){var e,a,o;return e=n,vs()!==t?(p(),R()!==t?(p(),(a=P())!==t?(p(),ms()!==t?(p(),(o=_u())!==t?(p(),U()!==t?(m=e,e=Ti(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function _u(){var e,a,o;return e=n,(a=hs())!==t&&(m=e,a=Si()),(e=a)===t&&(e=n,(a=ws())!==t&&(m=e,a=Oi()),(e=a)===t&&(e=n,(a=Is())!==t&&(m=e,a=Ci()),(e=a)===t&&(e=n,(a=gs())!==t&&(m=e,a=bi()),(e=a)===t&&(e=n,(a=Zt())!==t&&(m=e,a=Ni()),(e=a)===t&&(e=n,(a=zt())!==t&&(m=e,a=Ai()),(e=a)===t&&(e=n,(a=kt())!==t&&(m=e,a=xi()),(e=a)===t&&(e=n,(a=ys())!==t?(p(),R()!==t?(p(),(o=re())!==t?(p(),U()!==t?(m=e,e=Mi(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)))))))),e}function Ru(){var e,a,o,s;return e=n,Vt()!==t?(p(),R()!==t?(p(),(a=Et())===t&&(a=null),p(),(o=P())!==t?(p(),qe()!==t?(p(),(s=P())!==t?(p(),U()!==t?(m=e,e=Ei(a,o,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,Vt()!==t?(p(),R()!==t?(p(),(a=Et())===t&&(a=null),p(),(o=P())!==t?(p(),U()!==t?(m=e,e=Fi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Et(){var e;return(e=fs())===t&&(e=ds())===t&&(e=ps()),e}function Uu(){var e,a,o;return e=n,cs()!==t?(p(),R()!==t?(p(),(a=P())!==t?(p(),He()!==t?(p(),(o=P())!==t?(p(),U()!==t?(m=e,e=$i(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Ju(){var e,a,o;return e=n,(a=bs())!==t?(p(),R()!==t?(p(),(o=St())===t&&(o=null),p(),U()!==t?(m=e,e=Di(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Vu(){var e;return(e=qt())===t&&(e=Yt())===t&&(e=jt())===t&&(e=Bt())===t&&(e=Qt())===t&&(e=ae())===t&&(e=Ss())===t&&(e=Os()),e}function zu(){var e;return(e=ke())===t&&(e=es())===t&&(e=Wu())===t&&(e=Qu())===t&&(e=Bu())===t&&(e=Zu())===t&&(e=Hu())===t&&(e=ku()),e}function Zu(){var e,a;return e=n,zt()!==t?(p(),(a=ne())!==t?(m=e,e=Pi(a)):(n=e,e=t)):(n=e,e=t),e}function ku(){var e,a;return e=n,kt()!==t?(p(),(a=ne())!==t?(m=e,e=Li(a)):(n=e,e=t)):(n=e,e=t),e}function Hu(){var e,a,o,s;return e=n,Ht()!==t?(p(),l.charCodeAt(n)===45?(a=Fe,n++):(a=t,f===0&&I(De)),a===t&&(l.charCodeAt(n)===43?(a=Ee,n++):(a=t,f===0&&I($e))),a!==t?(p(),(o=ne())!==t?(p(),(s=Ft())!==t?(m=e,e=_i(a,o,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,Ht()!==t?(p(),(a=ne())!==t?(p(),(o=Ft())!==t?(m=e,e=Ri(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ft(){var e,a,o;return e=n,(a=qu())!==t?(p(),Ts()!==t?(p(),(o=Yu())!==t?(m=e,e=Ui(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=ju()),e}function qu(){var e,a,o;return e=n,(a=ue())!==t?(p(),R()!==t?(p(),(o=we())!==t?(p(),U()!==t?(m=e,e=Ji(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ue())!==t&&(m=e,a=Vi(a)),e=a),e}function Yu(){var e,a,o,s;return e=n,(a=ue())!==t&&(m=e,a=zi(a)),(e=a)===t&&(e=n,(a=ae())!==t?(p(),R()!==t?(p(),(o=we())!==t?(p(),Ce()!==t?(p(),(s=he())!==t?(p(),U()!==t?(m=e,e=Zi(o,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t?(p(),R()!==t?(p(),(o=we())!==t?(p(),U()!==t?(m=e,e=ki(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t&&(m=e,a=Hi()),e=a))),e}function ju(){var e,a,o,s;return e=n,(a=ue())!==t?(p(),R()!==t?(p(),(o=he())!==t?(p(),U()!==t?(m=e,e=qi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ue())!==t&&(m=e,a=Yi(a)),(e=a)===t&&(e=n,(a=ae())!==t?(p(),R()!==t?(p(),(o=we())!==t?(p(),Ce()!==t?(p(),(s=he())!==t?(p(),U()!==t?(m=e,e=ji(o,s)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t?(p(),R()!==t?(p(),(o=he())!==t?(p(),U()!==t?(m=e,e=Bi(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t&&(m=e,a=Qi()),e=a)))),e}function ue(){var e,a;return e=n,(a=jt())!==t&&(m=e,a=Wi()),(e=a)===t&&(e=n,(a=Bt())!==t&&(m=e,a=Gi()),(e=a)===t&&(e=n,(a=Qt())!==t&&(m=e,a=Ki()),(e=a)===t&&(e=n,(a=Yt())!==t&&(m=e,a=Xi()),(e=a)===t&&(e=n,(a=qt())!==t&&(m=e,a=eo()),e=a)))),e}function he(){var e,a;return e=n,(a=re())!==t&&(m=e,a=to(a)),e=a}function we(){var e,a;return e=n,(a=re())!==t&&(m=e,a=no(a)),e=a}function Bu(){var e,a;return e=n,Zt()!==t?(p(),(a=ne())!==t?(m=e,e=ro(a)):(n=e,e=t)):(n=e,e=t),e}function Qu(){var e,a;return e=n,(a=rs())!==t&&(m=e,a=ao()),e=a}function Wu(){var e,a;return e=n,(a=as())!==t&&(m=e,a=io()),(e=a)===t&&(e=n,(a=is())!==t&&(m=e,a=oo()),e=a),e}function ne(){var e;return(e=ke())===t&&(e=Ze()),e}function ke(){var e,a,o,s,g;if(e=n,l.charCodeAt(n)===39?(a=ot,n++):(a=t,f===0&&I(vt)),a===t&&(l.substr(n,2)===ut?(a=ut,n+=2):(a=t,f===0&&I(kr))),a!==t){for(o=[],s=n,l.substr(n,2)===de?(g=de,n+=2):(g=t,f===0&&I(mt)),g!==t&&(m=s,g=gt()),(s=g)===t&&(ct.test(l.charAt(n))?(s=l.charAt(n),n++):(s=t,f===0&&I(ht)));s!==t;)o.push(s),s=n,l.substr(n,2)===de?(g=de,n+=2):(g=t,f===0&&I(mt)),g!==t&&(m=s,g=gt()),(s=g)===t&&(ct.test(l.charAt(n))?(s=l.charAt(n),n++):(s=t,f===0&&I(ht)));l.charCodeAt(n)===39?(s=ot,n++):(s=t,f===0&&I(vt)),s!==t?(m=e,e=uo(o)):(n=e,e=t)}else n=e,e=t;return e}function Gu(){var e;return(e=Ku())===t&&(e=Xu()),e}function Ku(){var e,a,o,s,g;if(e=n,Se()!==t)if(p(),(a=P())!==t){for(p(),o=[],s=ge();s!==t;)o.push(s),s=ge();s=p(),(g=Oe())!==t?(m=e,e=so(a,o)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;if(e===t)if(e=n,Se()!==t)if(p(),(a=P())!==t){for(p(),o=[],s=ge();s!==t;)o.push(s),s=ge();s=p(),(g=$t())!==t?(p(),Oe()!==t?(m=e,e=lo(a,o,g)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;return e}function Xu(){var e,a,o,s;if(e=n,Se()!==t){for(p(),a=[],o=Ie();o!==t;)a.push(o),o=Ie();o=p(),(s=Oe())!==t?(m=e,e=co(a)):(n=e,e=t)}else n=e,e=t;if(e===t)if(e=n,Se()!==t){for(p(),a=[],o=Ie();o!==t;)a.push(o),o=Ie();o=p(),(s=$t())!==t?(p(),Oe()!==t?(m=e,e=fo(a,s)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Ie(){var e,a,o;return e=n,Wt()!==t?(p(),(a=P())!==t?(p(),Gt()!==t?(p(),(o=P())!==t?(m=e,e=po(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function ge(){var e,a,o;return e=n,Wt()!==t?(p(),(a=P())!==t?(p(),Gt()!==t?(p(),(o=P())!==t?(m=e,e=vo(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function $t(){var e,a;return e=n,Cs()!==t?(p(),(a=P())!==t?(m=e,e=mo(a)):(n=e,e=t)):(n=e,e=t),e}function es(){var e,a,o,s;return e=n,(a=ts())!==t?(o=n,f++,s=ze(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=ho(a)):(n=e,e=t)):(n=e,e=t),e}function ts(){var e,a,o,s;return e=n,(a=ye())!==t&&(o=Dt())!==t&&(s=Pt())!==t?(m=e,e=wo(a,o,s)):(n=e,e=t),e===t&&(e=n,(a=ye())!==t&&(o=Dt())!==t?(m=e,e=Io(a,o)):(n=e,e=t),e===t&&(e=n,(a=ye())!==t&&(o=Pt())!==t?(m=e,e=go(a,o)):(n=e,e=t),e===t&&(e=n,(a=ye())!==t&&(m=e,a=yo(a)),e=a))),e}function ye(){var e,a,o;return(e=re())===t&&(e=n,l.charCodeAt(n)===45?(a=Fe,n++):(a=t,f===0&&I(De)),a===t&&(l.charCodeAt(n)===43?(a=Ee,n++):(a=t,f===0&&I($e))),a!==t&&(o=re())!==t?(m=e,e=To(a,o)):(n=e,e=t)),e}function Dt(){var e,a,o;return e=n,l.charCodeAt(n)===46?(a=An,n++):(a=t,f===0&&I(Hr)),a!==t?((o=re())===t&&(o=null),m=e,e=So(o)):(n=e,e=t),e}function Pt(){var e,a,o;return e=n,(a=ns())!==t&&(o=re())!==t?(m=e,e=Oo(a,o)):(n=e,e=t),e}function re(){var e,a,o;if(e=n,a=[],(o=Lt())!==t)for(;o!==t;)a.push(o),o=Lt();else a=t;return a!==t&&(m=e,a=Co(a)),e=a}function Lt(){var e;return br.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(qr)),e}function ns(){var e,a,o;return e=n,Nr.test(l.charAt(n))?(a=l.charAt(n),n++):(a=t,f===0&&I(Yr)),a!==t?(Ar.test(l.charAt(n))?(o=l.charAt(n),n++):(o=t,f===0&&I(jr)),o===t&&(o=null),m=e,e=bo(a,o)):(n=e,e=t),e}function rs(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===xn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Br)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function as(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Mn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Qr)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function is(){var e,a,o,s;return e=n,l.substr(n,5).toLowerCase()===En?(a=l.substr(n,5),n+=5):(a=t,f===0&&I(Wr)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function He(){var e,a,o,s;return e=n,l.substr(n,2).toLowerCase()===Fn?(a=l.substr(n,2),n+=2):(a=t,f===0&&I(Gr)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=No()):(n=e,e=t)):(n=e,e=t),e}function _t(){var e,a,o,s;return e=n,l.substr(n,2).toLowerCase()===$n?(a=l.substr(n,2),n+=2):(a=t,f===0&&I(Kr)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Ao()):(n=e,e=t)):(n=e,e=t),e}function Rt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Dn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Xr)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=xo()):(n=e,e=t)):(n=e,e=t),e}function os(){var e,a,o,s;return e=n,l.substr(n,6).toLowerCase()===Pn?(a=l.substr(n,6),n+=6):(a=t,f===0&&I(ea)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Mo()):(n=e,e=t)):(n=e,e=t),e}function se(){var e,a,o,s;return e=n,l.substr(n,3).toLowerCase()===Ln?(a=l.substr(n,3),n+=3):(a=t,f===0&&I(ta)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Eo()):(n=e,e=t)):(n=e,e=t),e}function Te(){var e,a,o,s;return e=n,l.substr(n,3).toLowerCase()===_n?(a=l.substr(n,3),n+=3):(a=t,f===0&&I(na)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Fo()):(n=e,e=t)):(n=e,e=t),e}function Ut(){var e,a,o,s;return e=n,l.substr(n,2).toLowerCase()===Rn?(a=l.substr(n,2),n+=2):(a=t,f===0&&I(ra)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=$o()):(n=e,e=t)):(n=e,e=t),e}function Jt(){var e,a,o,s;return e=n,l.substr(n,7).toLowerCase()===Un?(a=l.substr(n,7),n+=7):(a=t,f===0&&I(aa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Do()):(n=e,e=t)):(n=e,e=t),e}function qe(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Jn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(ia)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Po()):(n=e,e=t)):(n=e,e=t),e}function us(){var e,a,o,s;return e=n,l.substr(n,3).toLowerCase()===Vn?(a=l.substr(n,3),n+=3):(a=t,f===0&&I(oa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Lo()):(n=e,e=t)):(n=e,e=t),e}function ss(){var e,a,o,s;return e=n,l.substr(n,9).toLowerCase()===zn?(a=l.substr(n,9),n+=9):(a=t,f===0&&I(ua)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=_o()):(n=e,e=t)):(n=e,e=t),e}function ls(){var e,a,o,s;return e=n,l.substr(n,7).toLowerCase()===Zn?(a=l.substr(n,7),n+=7):(a=t,f===0&&I(sa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Ro()):(n=e,e=t)):(n=e,e=t),e}function Vt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===kn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(la)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Uo()):(n=e,e=t)):(n=e,e=t),e}function cs(){var e,a,o,s;return e=n,l.substr(n,8).toLowerCase()===Hn?(a=l.substr(n,8),n+=8):(a=t,f===0&&I(ca)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Jo()):(n=e,e=t)):(n=e,e=t),e}function zt(){var e,a,o,s;return e=n,l.substr(n,9).toLowerCase()===qn?(a=l.substr(n,9),n+=9):(a=t,f===0&&I(fa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Vo()):(n=e,e=t)):(n=e,e=t),e}function Zt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Yn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(da)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=zo()):(n=e,e=t)):(n=e,e=t),e}function kt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===jn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(pa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Zo()):(n=e,e=t)):(n=e,e=t),e}function fs(){var e,a,o,s;return e=n,l.substr(n,7).toLowerCase()===Bn?(a=l.substr(n,7),n+=7):(a=t,f===0&&I(va)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=ko()):(n=e,e=t)):(n=e,e=t),e}function ds(){var e,a,o,s;return e=n,l.substr(n,8).toLowerCase()===Qn?(a=l.substr(n,8),n+=8):(a=t,f===0&&I(ma)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Ho()):(n=e,e=t)):(n=e,e=t),e}function ps(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Wn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(ha)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=qo()):(n=e,e=t)):(n=e,e=t),e}function vs(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Gn?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(wa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Yo()):(n=e,e=t)):(n=e,e=t),e}function ms(){var e,a,o,s;return e=n,l.substr(n,2).toLowerCase()===Kn?(a=l.substr(n,2),n+=2):(a=t,f===0&&I(Ia)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=jo()):(n=e,e=t)):(n=e,e=t),e}function hs(){var e,a,o,s;return e=n,l.substr(n,7).toLowerCase()===Xn?(a=l.substr(n,7),n+=7):(a=t,f===0&&I(ga)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Bo()):(n=e,e=t)):(n=e,e=t),e}function ws(){var e,a,o,s;return e=n,l.substr(n,8).toLowerCase()===er?(a=l.substr(n,8),n+=8):(a=t,f===0&&I(ya)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Qo()):(n=e,e=t)):(n=e,e=t),e}function Is(){var e,a,o,s;return e=n,l.substr(n,5).toLowerCase()===tr?(a=l.substr(n,5),n+=5):(a=t,f===0&&I(Ta)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Wo()):(n=e,e=t)):(n=e,e=t),e}function gs(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===nr?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Sa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Go()):(n=e,e=t)):(n=e,e=t),e}function ys(){var e,a,o,s;return e=n,l.substr(n,7).toLowerCase()===rr?(a=l.substr(n,7),n+=7):(a=t,f===0&&I(Oa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Ko()):(n=e,e=t)):(n=e,e=t),e}function Ts(){var e,a,o,s;return e=n,l.substr(n,2).toLowerCase()===ar?(a=l.substr(n,2),n+=2):(a=t,f===0&&I(Ca)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=Xo()):(n=e,e=t)):(n=e,e=t),e}function Ht(){var e,a,o,s;return e=n,l.substr(n,8).toLowerCase()===ir?(a=l.substr(n,8),n+=8):(a=t,f===0&&I(ba)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=eu()):(n=e,e=t)):(n=e,e=t),e}function qt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===or?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Na)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=tu()):(n=e,e=t)):(n=e,e=t),e}function Ss(){var e,a,o,s;return e=n,l.substr(n,13).toLowerCase()===ur?(a=l.substr(n,13),n+=13):(a=t,f===0&&I(Aa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=nu()):(n=e,e=t)):(n=e,e=t),e}function Os(){var e,a,o,s;return e=n,l.substr(n,15).toLowerCase()===sr?(a=l.substr(n,15),n+=15):(a=t,f===0&&I(xa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=ru()):(n=e,e=t)):(n=e,e=t),e}function Yt(){var e,a,o,s;return e=n,l.substr(n,5).toLowerCase()===lr?(a=l.substr(n,5),n+=5):(a=t,f===0&&I(Ma)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=au()):(n=e,e=t)):(n=e,e=t),e}function jt(){var e,a,o,s;return e=n,l.substr(n,3).toLowerCase()===cr?(a=l.substr(n,3),n+=3):(a=t,f===0&&I(Ea)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=iu()):(n=e,e=t)):(n=e,e=t),e}function Bt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===fr?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Fa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=ou()):(n=e,e=t)):(n=e,e=t),e}function Qt(){var e,a,o,s;return e=n,l.substr(n,6).toLowerCase()===dr?(a=l.substr(n,6),n+=6):(a=t,f===0&&I($a)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=uu()):(n=e,e=t)):(n=e,e=t),e}function ae(){var e,a,o,s;return e=n,l.substr(n,6).toLowerCase()===pr?(a=l.substr(n,6),n+=6):(a=t,f===0&&I(Da)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=su()):(n=e,e=t)):(n=e,e=t),e}function Se(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===vr?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Pa)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=lu()):(n=e,e=t)):(n=e,e=t),e}function Oe(){var e,a,o,s;return e=n,l.substr(n,3).toLowerCase()===mr?(a=l.substr(n,3),n+=3):(a=t,f===0&&I(La)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=cu()):(n=e,e=t)):(n=e,e=t),e}function Wt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===hr?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(_a)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=fu()):(n=e,e=t)):(n=e,e=t),e}function Gt(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===wr?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Ra)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=du()):(n=e,e=t)):(n=e,e=t),e}function Cs(){var e,a,o,s;return e=n,l.substr(n,4).toLowerCase()===Ir?(a=l.substr(n,4),n+=4):(a=t,f===0&&I(Ua)),a!==t?(o=n,f++,s=T(),f--,s===t?o=void 0:(n=o,o=t),o!==t?(m=e,e=pu()):(n=e,e=t)):(n=e,e=t),e}function Ce(){var e;return l.charCodeAt(n)===44?(e=gr,n++):(e=t,f===0&&I(Ja)),e}function R(){var e;return l.charCodeAt(n)===40?(e=yr,n++):(e=t,f===0&&I(Va)),e}function U(){var e;return l.charCodeAt(n)===41?(e=Tr,n++):(e=t,f===0&&I(za)),e}function p(){var e,a;for(e=[],a=Kt();a!==t;)e.push(a),a=Kt();return e}function Kt(){var e;return xr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&I(Za)),e}function bs(){var e,a,o,s;if(e=n,(a=At())!==t&&(m=e,a=vu(a)),(e=a)===t)if(e=n,l.charCodeAt(n)===96?(a=st,n++):(a=t,f===0&&I(wt)),a!==t){if(o=[],ft.test(l.charAt(n))?(s=l.charAt(n),n++):(s=t,f===0&&I(It)),s!==t)for(;s!==t;)o.push(s),ft.test(l.charAt(n))?(s=l.charAt(n),n++):(s=t,f===0&&I(It));else o=t;o!==t?(l.charCodeAt(n)===96?(s=st,n++):(s=t,f===0&&I(wt)),s!==t?(m=e,e=mu(o)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Ns(e,a){return{type:"unary-expression",operator:e,expr:a}}function Xt(e,a,o,s){var g={type:"binary-expression",operator:e,left:a,right:o};return s!==void 0&&(g.escape=s),g}function As(e,a){for(var o=[e],s=0;s<a.length;s++)o.push(a[s][3]);return o}function xs(e,a,o){return As(e,a)}function le(e,a){for(var o=e,s=0;s<a.length;s++)o=Xt(a[s][1],o,a[s][3]);return o}function Ms(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&Le("Timestamp literal is invalid")}function Es(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&Le("Time literal is invalid")}function Fs(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&Le("Date literal is invalid")}if((h=L())!==t&&n===l.length)return h;throw h!==t&&n<l.length&&I(hu()),Iu(Pe,K<l.length?l.charAt(K):null,K<l.length?_e(K,K+1):_e(K,K))}return i(r,Error),r.prototype.format=function(l){var w="Error: "+this.message;if(this.location){var h,t=null;for(h=0;h<l.length;h++)if(l[h].source===this.location.source){t=l[h].text.split(/\r\n|\n|\r/g);break}var S=this.location.start,C=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(S):S,L=this.location.source+":"+C.line+":"+C.column;if(t){var V=this.location.end,z=u("",C.line.toString().length," "),N=t[S.line-1],x=(S.line===V.line?V.column:N.length+1)-S.column||1;w+=`
 --> `+L+`
`+z+` |
`+C.line+" | "+N+`
`+z+" | "+u("",S.column-1," ")+u("",x,"^")}else w+=`
 at `+L}return w},r.buildMessage=function(l,w){var h={literal:function(N){return'"'+S(N.text)+'"'},class:function(N){var x=N.parts.map((function(Y){return Array.isArray(Y)?C(Y[0])+"-"+C(Y[1]):C(Y)}));return"["+(N.inverted?"^":"")+x.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function t(N){return N.charCodeAt(0).toString(16).toUpperCase()}function S(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(x){return"\\x0"+t(x)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(x){return"\\x"+t(x)}))}function C(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(x){return"\\x0"+t(x)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(x){return"\\x"+t(x)}))}function L(N){return h[N.type](N)}function V(N){var x,Y,_=N.map(L);if(_.sort(),_.length>0){for(x=1,Y=1;x<_.length;x++)_[x-1]!==_[x]&&(_[Y]=_[x],Y++);_.length=Y}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function z(N){return N?'"'+S(N)+'"':"end of input"}return"Expected "+V(l)+" but "+z(w)+" found."},{SyntaxError:r,parse:c}},(an=Qe).exports&&(an.exports=on());var Xl=Qe.exports;class ec{static parse(r){return Xl.parse(r)}}const tc=new Set(["current_timestamp","current_date","current_time"]);class nc{static makeBool(r){return gn(r)}static featureValue(r,u,c,l){return Sn(r,u,c,l)}static equalsNull(r){return r===null}static applyLike(r,u,c){return Ke(r,u,c)}static ensureArray(r){return We(r)}static applyIn(r,u){return Ge(r,u)}static currentDate(r){return q.fromNow(r)}static makeSqlInterval(r,u,c){return A.createFromValueAndQualifer(r,u,c)}static convertInterval(r){return r instanceof A?r.valueInMilliseconds():r}static currentTimestamp(r){return Ae(new Date,r)}static compare(r,u,c,l){return B(u,c,r)}static calculate(r,u,c,l){return In(r,u,c,l)}static evaluateTime(r){return et(r)}static evaluateTimestamp(r,u,c){return xe(r,u,c)}static evaluateDate(r,u){return mn(r,u)}static evaluateFunction(r,u,c){return tt(r,u,c)}static lookup(r,u){const c=u[r];return c===void 0?null:c}static between(r,u,c){return r==null||u[0]==null||u[1]==null?null:B(r,u[0],">=")&&B(r,u[1],"<=")}static notbetween(r,u,c){return r==null||u[0]==null||u[1]==null?null:B(r,u[0],"<")||B(r,u[1],">")}static ternaryNot(r){return Ne(r)}static ternaryAnd(r,u){return yn(r,u)}static ternaryOr(r,u){return Tn(r,u)}}class rt{constructor(r,u,c="UTC"){this.fieldsIndex=u,this.timeZone=c,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=ec.parse(r);const{isStandardized:l,isAggregate:w,referencedFieldNames:h}=this._extractExpressionInfo(u);this._referencedFieldNames=h,this.isStandardized=l,this.isAggregate=w}static convertValueToStorageFormat(r,u=null){if(u===null)return j(r)?r.getTime():M(r)?r.toMillis():F(r)?r.toStorageFormat():D(r)?r.toStorageString():E(r)?r.toStorageFormat():r;switch(u){case"date":return j(r)?r.getTime():M(r)?r.toMillis():F(r)?r.toMilliseconds():E(r)?r.toNumber():r;case"date-only":return j(r)?q.fromDateJS(r).toString():F(r)?q.fromSqlTimeStampOffset(r).toString():M(r)?q.fromDateTime(r).toString():r;case"time-only":return j(r)?Q.fromDateJS(r).toStorageString():M(r)?Q.fromDateTime(r).toStorageString():F(r)?Q.fromSqlTimeStampOffset(r).toStorageString():D(r)?r.toStorageString():r;case"timestamp-offset":if(j(r))return H.fromJSDate(r).toStorageFormat();if(M(r))return H.fromDateTime(r).toStorageFormat();if(F(r))return r.toStorageFormat()}return r}static create(r,u,c="UTC"){return new rt(r,u,c)}get fieldNames(){return this._referencedFieldNames}testSet(r,u=oe){return!!this._evaluateNode(this.parseTree,null,u,r)}calculateValue(r,u=oe){const c=this._evaluateNode(this.parseTree,r,u,null);return c instanceof A?c.valueInMilliseconds()/864e5:c}calculateValueCompiled(r,u=oe){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(r,this.parameters,u,this.fieldsIndex,this.timeZone):en("esri-csp-restrictions")?this.calculateValue(r,u):(this._compileMe(),this.parseTree._compiledVersion(r,this.parameters,u,this.fieldsIndex,this.timeZone))}testFeature(r,u=oe){return!!this._evaluateNode(this.parseTree,r,u,null)}testFeatureCompiled(r,u=oe){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(r,this.parameters,u,this.fieldsIndex,this.timeZone):en("esri-csp-restrictions")?this.testFeature(r,u):(this._compileMe(),!!this.parseTree._compiledVersion(r,this.parameters,u,this.fieldsIndex,this.timeZone))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,(r=>{r.type==="current-time"?this._hasDateFunctions=!0:r.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||tc.has(r.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const r=new Set;return this._visitAll(this.parseTree,(u=>{u.type==="function"&&r.add(u.name.toLowerCase())})),Array.from(r)}getExpressions(){const r=new Map;return this._visitAll(this.parseTree,(u=>{if(u.type==="function"){const c=u.name.toLowerCase(),l=u.args.value[0];if(l.type==="column-reference"){const w=l.column,h=`${c}-${w}`;r.has(h)||r.set(h,{aggregateType:c,field:w})}}})),[...r.values()]}getVariables(){const r=new Set;return this._visitAll(this.parseTree,(u=>{u.type==="parameter"&&r.add(u.value.toLowerCase())})),Array.from(r)}_compileMe(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",r).bind(nc)}_extractExpressionInfo(r){const u=[],c=new Set;let l=!0,w=!1;return this._visitAll(this.parseTree,(h=>{switch(h.type){case"column-reference":{const t=r?.get(h.column);let S,C;t?S=C=t.name??"":(C=h.column,S=C.toLowerCase()),c.has(S)||(c.add(S),u.push(C)),h.column=C;break}case"function":{const{name:t,args:S}=h,C=S.value.length;l&&(l=tl(t,C)),w===!1&&(w=nn(t,C));break}}})),{referencedFieldNames:Array.from(u),isStandardized:l,isAggregate:w}}_visitAll(r,u){if(r!=null)switch(u(r),r.type){case"when-clause":this._visitAll(r.operand,u),this._visitAll(r.value,u);break;case"case-expression":for(const c of r.clauses)this._visitAll(c,u);r.format==="simple"&&this._visitAll(r.operand,u),r.else!==null&&this._visitAll(r.else,u);break;case"expression-list":for(const c of r.value)this._visitAll(c,u);break;case"unary-expression":this._visitAll(r.expr,u);break;case"binary-expression":this._visitAll(r.left,u),this._visitAll(r.right,u);break;case"function":this._visitAll(r.args,u)}}evaluateNodeToJavaScript(r){switch(r.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case"case-expression":{let u="";if(r.format==="simple"){const c=this.evaluateNodeToJavaScript(r.operand);u="( ";for(let l=0;l<r.clauses.length;l++)u+=" (this.compare('=',"+c+","+this.evaluateNodeToJavaScript(r.clauses[l].operand)+") ? ("+this.evaluateNodeToJavaScript(r.clauses[l].value)+") : ";r.else!==null?u+=this.evaluateNodeToJavaScript(r.else):u+="null",u+=" )"}else{u="( ";for(let c=0;c<r.clauses.length;c++)u+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[c].operand)+")===true ? ("+this.evaluateNodeToJavaScript(r.clauses[c].value)+") : ";r.else!==null?u+=this.evaluateNodeToJavaScript(r.else):u+="null",u+=" )"}return u}case"parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case"expression-list":{let u="[";for(const c of r.value)u!=="["&&(u+=","),u+=this.evaluateNodeToJavaScript(c);return u+="]",u}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case"binary-expression":switch(r.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"IS":if(r.right.type!=="null")throw new v(d.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case"ISNOT":if(r.right.type!=="null")throw new v(d.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)"}throw new v(d.UnsupportedOperator,{operator:r.operator});case"null":case"boolean":case"string":case"number":return JSON.stringify(r.value);case"time":return"this.evaluateTime(JSON.stringify(node.value))";case"date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case"timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case"current-time":return r.mode==="date"?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(r.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+", timeZone)"}throw new v(d.UnsupportedSyntax,{node:r.type})}_evaluateNode(r,u,c,l){let w;switch(r.type){case"interval":{const h=this._evaluateNode(r.value,u,c,l);return A.createFromValueAndQualifer(h,r.qualifier,r.op)}case"case-expression":if(r.format==="simple"){const h=this._evaluateNode(r.operand,u,c,l);for(let t=0;t<r.clauses.length;t++)if(B(h,this._evaluateNode(r.clauses[t].operand,u,c,l),"=",this.timeZone))return this._evaluateNode(r.clauses[t].value,u,c,l);if(r.else!==null)return this._evaluateNode(r.else,u,c,l)}else{for(let h=0;h<r.clauses.length;h++)if(gn(this._evaluateNode(r.clauses[h].operand,u,c,l)))return this._evaluateNode(r.clauses[h].value,u,c,l);if(r.else!==null)return this._evaluateNode(r.else,u,c,l)}return null;case"parameter":return w=this.parameters[r.value.toLowerCase()],j(w)?J.fromJSDate(w):w instanceof Ds?w.toDateTime():w;case"expression-list":{const h=[];for(const t of r.value)h.push(this._evaluateNode(t,u,c,l));return h}case"unary-expression":return Ne(this._evaluateNode(r.expr,u,c,l));case"binary-expression":switch(r.operator){case"AND":return yn(this._evaluateNode(r.left,u,c,l),this._evaluateNode(r.right,u,c,l));case"OR":return Tn(this._evaluateNode(r.left,u,c,l),this._evaluateNode(r.right,u,c,l));case"IS":if(r.right.type!=="null")throw new v(d.UnsupportedIsRhs);return this._evaluateNode(r.left,u,c,l)===null;case"ISNOT":if(r.right.type!=="null")throw new v(d.UnsupportedIsRhs);return this._evaluateNode(r.left,u,c,l)!==null;case"IN":{const h=We(this._evaluateNode(r.right,u,c,l));return Ge(this._evaluateNode(r.left,u,c,l),h)}case"NOT IN":{const h=We(this._evaluateNode(r.right,u,c,l));return Ne(Ge(this._evaluateNode(r.left,u,c,l),h))}case"BETWEEN":{const h=this._evaluateNode(r.left,u,c,l),t=this._evaluateNode(r.right,u,c,l);return h==null||t[0]==null||t[1]==null?null:B(h,t[0],">=",this.timeZone)&&B(h,t[1],"<=",this.timeZone)}case"NOTBETWEEN":{const h=this._evaluateNode(r.left,u,c,l),t=this._evaluateNode(r.right,u,c,l);return h==null||t[0]==null||t[1]==null?null:B(h,t[0],"<",this.timeZone)||B(h,t[1],">",this.timeZone)}case"LIKE":return Ke(this._evaluateNode(r.left,u,c,l),this._evaluateNode(r.right,u,c,l),r.escape);case"NOT LIKE":return Ne(Ke(this._evaluateNode(r.left,u,c,l),this._evaluateNode(r.right,u,c,l),r.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return B(this._evaluateNode(r.left,u,c,l),this._evaluateNode(r.right,u,c,l),r.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return In(r.operator,this._evaluateNode(r.left,u,c,l),this._evaluateNode(r.right,u,c,l),this.timeZone)}case"null":case"boolean":case"string":case"number":return r.value;case"date":return mn(r.value,"unknown");case"timestamp":return xe(r.value,"unknown");case"time":return et(r.value);case"current-time":return r.mode==="date"?q.fromNow(this.timeZone):Ae(new Date,this.timeZone);case"column-reference":return Sn(u,r.column,this.fieldsIndex,c);case"data-type":return r.value;case"function":{if(this.isAggregate&&nn(r.name,r.args.value.length)){const t=[];for(const S of r.args?.value||[]){const C=[];for(const L of l||[])C.push(this._evaluateNode(S,L,c,null));t.push(C)}return Rs(r.name,t)}const h=this._evaluateNode(r.args,u,c,l);return tt(r.name,h,this.timeZone)}}throw new v(d.UnsupportedSyntax,{node:r.type})}}function gn(i){return i===!0}function We(i){return Array.isArray(i)?i:[i]}function Ne(i){return i!==null?i!==!0:null}function yn(i,r){return i!=null&&r!=null?i===!0&&r===!0:i!==!1&&r!==!1&&null}function Tn(i,r){return i!=null&&r!=null?i===!0||r===!0:i===!0||r===!0||null}function Ge(i,r){if(i==null)return null;let u=!1;for(const c of r)if(c==null)u=null;else if(i===c){u=!0;break}return u}const un="-[]/{}()*+?.\\^$|";var ie;function rc(i,r){const u=r;let c="",l=ie.Normal;for(let w=0;w<i.length;w++){const h=i.charAt(w);switch(l){case ie.Normal:h===u?l=ie.Escaped:un.includes(h)?c+="\\"+h:c+=h==="%"?".*":h==="_"?".":h;break;case ie.Escaped:un.includes(h)?c+="\\"+h:c+=h,l=ie.Normal}}return new RegExp("^"+c+"$","m")}function Ke(i,r,u){return i==null?null:rc(r,u).test(i)}function ac(i){return i&&typeof i.attributes=="object"}function Sn(i,r,u,c){const l=c.getAttribute(i,r),w=u?.get(r);return l==null||w?.type!=="esriFieldTypeDate"&&w?.type!=="date"?l==null||w?.type!=="esriFieldTypeDateOnly"&&w?.type!=="date-only"?l==null||w?.type!=="esriFieldTypeTimeOnly"&&w?.type!=="time-only"?l==null||w?.type!=="esriFieldTypeTimestampOffset"&&w?.type!=="timestamp-offset"?l:new H(l):Q.fromReader(l):q.fromReader(l):Ae(new Date(l),u.getTimeZone(w.name)??"UTC")}(function(i){i[i.Normal=0]="Normal",i[i.Escaped=1]="Escaped"})(ie||(ie={}));const oe={getAttribute:(i,r)=>(ac(i)?i.attributes:i)[r]},sc=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:rt,defaultAttributeAdapter:oe},Symbol.toStringTag,{value:"Module"}));export{rt as I,sc as W,W as a,v as n,H as r,uc as s,d as t};
