import{a4 as a}from"./uuid-854440a9.js";var n;function f(t,e,o={}){const r=e===n.WEBGL1?"webgl":"webgl2";return t.getContext(r,o)||null}function F(t,e,o={}){const r=E(t);for(const l of r){const s=f(e,l,o);if(s)return s}return null}function E(t){if(t==="3d")return[n.WEBGL2];const e=a("esri-force-webgl");return e===n.WEBGL1||e===n.WEBGL2?[e]:a("mac")&&a("chrome")?[n.WEBGL1,n.WEBGL2]:[n.WEBGL2,n.WEBGL1]}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(n||(n={}));let u,i;function T(t){const e=E(t);for(;e.length>1;){const o=c(e.shift());if(o.available)return o}return c(e.shift())}function c(t){switch(t){case n.WEBGL1:return x();case n.WEBGL2:return B()}}function x(){return u||(u=m()),u}function B(){return i||(i=L()),i}class _{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class G extends _{constructor(){super(...arguments),this.type=n.WEBGL1}}class g extends _{constructor(){super(...arguments),this.type=n.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function d(t,e){if(t===n.WEBGL1&&typeof WebGLRenderingContext>"u"||t===n.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const o=document.createElement("canvas");if(!o)return null;let r=f(o,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=f(o,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===n.WEBGL1){const s=r.getParameter(r.VERSION),p=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(p){const h=parseFloat(p[1]);e.available=h>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const l=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return l&&(e.supportsHighPrecisionFragment=l.precision>0),r}function m(){const t=new G,e=d(n.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function L(){const t=new g,e=d(n.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}export{T as a,n,f as r,F as t};
