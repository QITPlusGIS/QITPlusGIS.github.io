import{_ as ce}from"./index-e42a63f9.js";import{j as Nt,s as Ze,dl as wt,cF as $t,S as we,N as B,b as Gt,a2 as _e,A as vt,o as Je,a as c,y as _,c as $e,m as It,aN as C,gB as fe,gC as Q,f8 as Tt,I as Wt,ft as Ft,gD as bt,d as ee,aO as Ht,gE as Oe,c1 as jt,aV as kt,gF as Ut,bG as xt,gG as Bt,bE as Kt,bF as Dt,bH as zt,bI as qt,C as Qe,gH as $,eJ as Fe,L as Xe,gI as Vt,W as Zt,gJ as Jt,a$ as U,ah as be,b4 as Qt,b5 as Xt,M as Yt,b6 as en,K as tn,gK as nn,fe as Ye,gL as et,fg as tt,fu as pe,T as x,U as Le,R as nt,eD as rt,gM as rn,gN as sn,gO as ln,a6 as st,g0 as it,gP as lt,d$ as an,bt as on}from"./uuid-fb53ae2e.js";async function un(e){const n="portalItem"in e?e:{portalItem:e},{fromItem:t}=await ce(()=>import("./portalLayers-408a31ab.js").then(r=>r.p),["./portalLayers-408a31ab.js","./uuid-fb53ae2e.js","./index-e42a63f9.js","./associatedFeatureServiceUtils-8124dbc4.js","./PortalItem-01395053.js","./requestPresets-25d3d846.js","./layerUtils-a8920453.js","./portalItemUtils-064daa72.js"],import.meta.url);try{return await t(n)}catch(r){const i=n&&n.portalItem,l=(i==null?void 0:i.id)||"unset",a=i&&i.portal&&i.portal.url||Nt.portalUrl;throw Ze.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+l+"')",r),r}}let cn=0,R=class extends wt.EventedMixin($t(It)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new we(-180,-90,180,90,B.WGS84),this.id=Date.now().toString(16)+"-layer-"+cn++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=B.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(n){const t=typeof n=="string"?{url:n}:n;return(await ce(()=>import("./arcgisLayers-ae00594c.js"),["./arcgisLayers-ae00594c.js","./index-e42a63f9.js","./uuid-fb53ae2e.js","./associatedFeatureServiceUtils-8124dbc4.js","./PortalItem-01395053.js","./fetchService-7c55146c.js","./requestPresets-25d3d846.js","./layerUtils-a8920453.js"],import.meta.url)).fromUrl(t)}static fromPortalItem(n){return un(n)}initialize(){this.when().catch(n=>{Gt(n)||Ze.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:n})})}destroy(){const n=this.parent;if(n){const t=this;"layers"in n&&n.layers.includes(t)?n.layers.remove(t):"tables"in n&&n.tables.includes(t)?n.tables.remove(t):"baseLayers"in n&&n.baseLayers.includes(t)?n.baseLayers.remove(t):"referenceLayers"in n&&n.referenceLayers.includes(t)&&n.referenceLayers.remove(t),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return _e(this.url)}async fetchAttributionData(){const n=this.attributionDataUrl;if(this.hasAttributionData&&n)return(await vt(n,{query:{f:"json"},responseType:"json"})).data;throw new Je("layer:no-attribution-data","Layer does not have attribution data")}};c([_({type:String})],R.prototype,"attributionDataUrl",void 0),c([_({type:we})],R.prototype,"fullExtent",void 0),c([_({readOnly:!0})],R.prototype,"hasAttributionData",null),c([_({type:String,clonable:!1})],R.prototype,"id",void 0),c([_({type:Boolean,nonNullable:!0})],R.prototype,"legendEnabled",void 0),c([_({type:["show","hide","hide-children"]})],R.prototype,"listMode",void 0),c([_({type:Number,range:{min:0,max:1},nonNullable:!0})],R.prototype,"opacity",void 0),c([_({clonable:!1})],R.prototype,"parent",void 0),c([_({readOnly:!0})],R.prototype,"parsedUrl",null),c([_({type:Boolean,readOnly:!0})],R.prototype,"persistenceEnabled",void 0),c([_({type:Boolean})],R.prototype,"popupEnabled",void 0),c([_({type:Boolean})],R.prototype,"attributionVisible",void 0),c([_({type:B})],R.prototype,"spatialReference",void 0),c([_({type:String})],R.prototype,"title",void 0),c([_({readOnly:!0,json:{read:!1}})],R.prototype,"type",void 0),c([_()],R.prototype,"url",void 0),c([_({type:Boolean,nonNullable:!0})],R.prototype,"visible",void 0),R=c([$e("esri.layers.Layer")],R);const tr=R,w=C.radius,y=C.eccentricitySquared,fn={a1:w*y,a2:w*y*w*y,a3:w*y*y/2,a4:w*y*w*y*2.5,a5:w*y+w*y*y/2,a6:1-y};1/294.9786982,1/298.257222101,C.radius,C.flattening,fe.radius,fe.flattening,1/192.0430107526882,Q.radius,Q.flattening,1/10.2079945799458,1/43.61604095563141,Q.radius;var s;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(s||(s={}));const at={[s.WGS84]:{[s.CGCS2000]:null,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:d,[s.WGS84_COMPARABLE_LON_LAT]:d,[s.SPHERICAL_ECEF]:T,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:te,[s.PLATE_CARREE]:v,[s.WGS84]:d,[s.WGS84_ECEF]:F},[s.CGCS2000]:{[s.CGCS2000]:d,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:d,[s.WGS84_COMPARABLE_LON_LAT]:d,[s.SPHERICAL_ECEF]:T,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:v,[s.WGS84]:null,[s.WGS84_ECEF]:F},[s.GCSMARS2000]:{[s.CGCS2000]:null,[s.GCSMARS2000]:d,[s.GCSMOON2000]:null,[s.LON_LAT]:d,[s.WGS84_COMPARABLE_LON_LAT]:null,[s.SPHERICAL_ECEF]:null,[s.SPHERICAL_MARS_PCPF]:Ue,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:null,[s.WGS84]:null,[s.WGS84_ECEF]:null},[s.GCSMOON2000]:{[s.CGCS2000]:null,[s.GCSMARS2000]:null,[s.GCSMOON2000]:d,[s.LON_LAT]:d,[s.WGS84_COMPARABLE_LON_LAT]:null,[s.SPHERICAL_ECEF]:null,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:ke,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:null,[s.WGS84]:null,[s.WGS84_ECEF]:null},[s.WEB_MERCATOR]:{[s.CGCS2000]:null,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:K,[s.WGS84_COMPARABLE_LON_LAT]:K,[s.SPHERICAL_ECEF]:dn,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:d,[s.PLATE_CARREE]:Sn,[s.WGS84]:K,[s.WGS84_ECEF]:hn},[s.WGS84_ECEF]:{[s.CGCS2000]:b,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:b,[s.WGS84_COMPARABLE_LON_LAT]:b,[s.SPHERICAL_ECEF]:On,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:Ln,[s.PLATE_CARREE]:Rn,[s.WGS84]:b,[s.WGS84_ECEF]:d},[s.SPHERICAL_ECEF]:{[s.CGCS2000]:W,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:W,[s.WGS84_COMPARABLE_LON_LAT]:W,[s.SPHERICAL_ECEF]:d,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:yn,[s.PLATE_CARREE]:An,[s.WGS84]:W,[s.WGS84_ECEF]:gn},[s.SPHERICAL_MARS_PCPF]:{[s.CGCS2000]:null,[s.GCSMARS2000]:Be,[s.GCSMOON2000]:null,[s.LON_LAT]:Be,[s.WGS84_COMPARABLE_LON_LAT]:null,[s.SPHERICAL_ECEF]:null,[s.SPHERICAL_MARS_PCPF]:d,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:null,[s.WGS84]:null,[s.WGS84_ECEF]:null},[s.SPHERICAL_MOON_PCPF]:{[s.CGCS2000]:null,[s.GCSMARS2000]:null,[s.GCSMOON2000]:xe,[s.LON_LAT]:xe,[s.WGS84_COMPARABLE_LON_LAT]:null,[s.SPHERICAL_ECEF]:null,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:d,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:null,[s.WGS84]:null,[s.WGS84_ECEF]:null},[s.UNKNOWN]:{[s.CGCS2000]:null,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:null,[s.WGS84_COMPARABLE_LON_LAT]:null,[s.SPHERICAL_ECEF]:null,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:d,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:null,[s.WGS84]:null,[s.WGS84_ECEF]:null},[s.LON_LAT]:{[s.CGCS2000]:d,[s.GCSMARS2000]:d,[s.GCSMOON2000]:d,[s.LON_LAT]:d,[s.WGS84_COMPARABLE_LON_LAT]:d,[s.SPHERICAL_ECEF]:T,[s.SPHERICAL_MARS_PCPF]:Ue,[s.SPHERICAL_MOON_PCPF]:ke,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:te,[s.PLATE_CARREE]:v,[s.WGS84]:d,[s.WGS84_ECEF]:F},[s.WGS84_COMPARABLE_LON_LAT]:{[s.CGCS2000]:null,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:d,[s.WGS84_COMPARABLE_LON_LAT]:d,[s.SPHERICAL_ECEF]:T,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:null,[s.PLATE_CARREE]:v,[s.WGS84]:d,[s.WGS84_ECEF]:F},[s.PLATE_CARREE]:{[s.CGCS2000]:I,[s.GCSMARS2000]:null,[s.GCSMOON2000]:null,[s.LON_LAT]:I,[s.WGS84_COMPARABLE_LON_LAT]:I,[s.SPHERICAL_ECEF]:Cn,[s.SPHERICAL_MARS_PCPF]:null,[s.SPHERICAL_MOON_PCPF]:null,[s.UNKNOWN]:null,[s.WEB_MERCATOR]:En,[s.PLATE_CARREE]:d,[s.WGS84]:I,[s.WGS84_ECEF]:mn}};function pn(e){const n=Me(e,Nn);return at[n][s.WGS84_COMPARABLE_LON_LAT]}function ot(e,n,t=ut()){return e==null||n==null?null:Mn(e,n,t).projector}function Me(e,n){return e?n.spatialReference===e?n.spatialReferenceId:(n.spatialReference=e,"metersPerUnit"in n&&(n.metersPerUnit=Ht(e,1)),Oe(e)?n.spatialReferenceId=s.SPHERICAL_ECEF:jt(e)?n.spatialReferenceId=s.WGS84:kt(e)?n.spatialReferenceId=s.WEB_MERCATOR:Ut(e)?n.spatialReferenceId=s.PLATE_CARREE:e.wkt===xt.wkt?n.spatialReferenceId=s.WGS84_ECEF:e.wkid===Bt.CGCS2000?n.spatialReferenceId=s.CGCS2000:e.wkt===Kt.wkt?n.spatialReferenceId=s.SPHERICAL_MARS_PCPF:e.wkt===Dt.wkt?n.spatialReferenceId=s.SPHERICAL_MOON_PCPF:zt(e)?n.spatialReferenceId=s.GCSMARS2000:qt(e)?n.spatialReferenceId=s.GCSMOON2000:n.spatialReferenceId=s.UNKNOWN):s.UNKNOWN}function d(e,n,t,r){e!==t&&(t[r++]=e[n++],t[r++]=e[n++],t[r]=e[n])}function K(e,n,t,r){t[r++]=q*(e[n++]/C.radius),t[r++]=q*(Math.PI/2-2*Math.atan(Math.exp(-e[n++]/C.radius))),t[r]=e[n]}function dn(e,n,t,r){K(e,n,t,r),T(t,r,t,r)}function hn(e,n,t,r){K(e,n,t,r),F(t,r,t,r)}function _n(e,n,t,r,i){const l=.4999999*Math.PI,a=Wt(z*e[n+1],-l,l),o=Math.sin(a);t[r++]=z*e[n]*i.radius,t[r++]=i.halfSemiMajorAxis*Math.log((1+o)/(1-o)),t[r]=e[n+2]}function te(e,n,t,r){_n(e,n,t,r,C)}const He=C.radius*Math.PI/180,je=180/(C.radius*Math.PI);function v(e,n,t,r){t[r]=e[n]*He,t[r+1]=e[n+1]*He,t[r+2]=e[n+2]}function I(e,n,t,r){t[r]=e[n]*je,t[r+1]=e[n+1]*je,t[r+2]=e[n+2]}function Sn(e,n,t,r){K(e,n,t,r),v(t,r,t,r)}function Rn(e,n,t,r){b(e,n,t,r),v(t,r,t,r)}function An(e,n,t,r){W(e,n,t,r),v(t,r,t,r)}function Cn(e,n,t,r){I(e,n,t,r),T(t,r,t,r)}function En(e,n,t,r){I(e,n,t,r),te(t,r,t,r)}function mn(e,n,t,r){I(e,n,t,r),F(t,r,t,r)}function Ge(e,n,t,r,i){const l=i+e[n+2],a=z*e[n+1],o=z*e[n],u=Math.cos(a);t[r++]=Math.cos(o)*u*l,t[r++]=Math.sin(o)*u*l,t[r]=Math.sin(a)*l}function ke(e,n,t,r){Ge(e,n,t,r,fe.radius)}function Ue(e,n,t,r){Ge(e,n,t,r,Q.radius)}function T(e,n,t,r){Ge(e,n,t,r,C.radius)}function ve(e,n,t,r,i){const l=e[n],a=e[n+1],o=e[n+2],u=Math.sqrt(l*l+a*a+o*o),p=bt(o/(u===0?1:u)),f=Math.atan2(a,l);t[r++]=q*f,t[r++]=q*p,t[r]=u-i}function xe(e,n,t,r){ve(e,n,t,r,fe.radius)}function Be(e,n,t,r){ve(e,n,t,r,Q.radius)}function W(e,n,t,r){ve(e,n,t,r,C.radius)}function yn(e,n,t,r){W(e,n,t,r),te(t,r,t,r)}function gn(e,n,t,r){W(e,n,t,r),F(t,r,t,r)}function Pn(e,n,t,r,i){const l=z*e[n],a=z*e[n+1],o=e[n+2],u=Math.sin(a),p=Math.cos(a),f=i.radius/Math.sqrt(1-i.eccentricitySquared*u*u);t[r++]=(f+o)*p*Math.cos(l),t[r++]=(f+o)*p*Math.sin(l),t[r++]=(f*(1-i.eccentricitySquared)+o)*u}function F(e,n,t,r){Pn(e,n,t,r,C)}function b(e,n,t,r){const i=fn,l=e[n],a=e[n+1],o=e[n+2];let u,p,f,h,S,L,M,E,N,V,Ae,Ce,Ee,H,j,me,ye,ge,k,Te,We;u=Math.abs(o),p=l*l+a*a,f=Math.sqrt(p),h=p+o*o,S=Math.sqrt(h),Te=Math.atan2(a,l),L=o*o/h,M=p/h,H=i.a2/S,j=i.a3-i.a4/S,M>.3?(E=u/S*(1+M*(i.a1+H+L*j)/S),k=Math.asin(E),V=E*E,N=Math.sqrt(1-V)):(N=f/S*(1-L*(i.a5-H-M*j)/S),k=Math.acos(N),V=1-N*N,E=Math.sqrt(V)),Ae=1-C.eccentricitySquared*V,Ce=C.radius/Math.sqrt(Ae),Ee=i.a6*Ce,H=f-Ce*N,j=u-Ee*E,ye=N*H+E*j,me=N*j-E*H,ge=me/(Ee/Ae+ye),k+=ge,We=ye+me*ge/2,o<0&&(k=-k),t[r++]=q*Te,t[r++]=q*k,t[r]=We}function On(e,n,t,r){b(e,n,t,r),T(t,r,t,r)}function Ln(e,n,t,r){b(e,n,t,r),te(t,r,t,r)}function Mn(e,n,t){if(e==null||n==null||t.source.spatialReference===e&&t.dest.spatialReference===n)return t;const r=Me(e,t.source),i=Me(n,t.dest);return r===s.UNKNOWN&&i===s.UNKNOWN?ee(e,n)?t.projector=d:t.projector=null:t.projector=at[r][i],t}function ut(){return{source:{spatialReference:null,spatialReferenceId:s.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:s.UNKNOWN,metersPerUnit:1},projector:d}}const Nn={spatialReference:null,spatialReferenceId:s.UNKNOWN},nr={spatialReference:null,spatialReferenceId:s.UNKNOWN},ct=ut(),z=Ft(1),q=Tt(1);function ie(e,n,t,r,i,l,a=1){const o=ot(n,i,ct);if(o==null)return!1;if(o===d){if(e===r&&t===l)return!0;const p=t+3*a;for(let f=t,h=l;f<p;f++,h++)r[h]=e[f];return!0}const u=t+3*a;for(let p=t,f=l;p<u;p+=3,f+=3)o(e,p,r,f);return!0}const rr=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:ie},Symbol.toStringTag,{value:"Module"}));function Ke(e,n,t,r,i,l){return le[0]=e,le[1]=n,le[2]=t,ie(le,r,0,i,l,0,1)}const le=Qe();let ae=0;class D{static fromGE(n){const t=new D;return t._wkt=n.wkt,t._wkid=n.wkid,t._isInverse=n.isInverse,t}constructor(n){this.uid=ae++,n?(this._wkt=n.wkt!=null?n.wkt:null,this._wkid=n.wkid!=null?n.wkid:-1,this._isInverse=n.isInverse!=null&&n.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(n){this._wkt=n,this.uid=ae++}get wkid(){return this._wkid}set wkid(n){this._wkid=n,this.uid=ae++}get isInverse(){return this._isInverse}set isInverse(n){this._isInverse=n,this.uid=ae++}getInverse(){const n=new D;return n._wkt=this.wkt,n._wkid=this._wkid,n._isInverse=!this.isInverse,n}}let de=class Z{static cacheKey(n,t){var r,i,l,a,o,u;return[((r=n.wkid)==null?void 0:r.toString())??"-1",((i=n.wkt)==null?void 0:i.toString())??"",((l=n.wkt2)==null?void 0:l.toString())??"",((a=t.wkid)==null?void 0:a.toString())??"-1",((o=t.wkt)==null?void 0:o.toString())??"",((u=t.wkt2)==null?void 0:u.toString())??""].join()}static fromGE(n){const t=new Z;let r="";for(const i of n.steps){const l=D.fromGE(i);t.steps.push(l),r+=l.uid.toString()+","}return t._cachedProjection={},t._gtlistentry=null,t._chain=r,t}constructor(n){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,n==null?void 0:n.steps)for(const t of n.steps)t instanceof D?this.steps.push(t):this.steps.push(new D({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){const n=new Z;n.steps=[];for(let t=this.steps.length-1;t>=0;t--){const r=this.steps[t];n.steps.push(r.getInverse())}return n}getGTListEntry(){let n="";for(const t of this.steps)n+=t.uid.toString()+",";return n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n),this._gtlistentry}assignCachedGe(n,t,r){this._cachedProjection[Z.cacheKey(n,t)]=r}getCachedGeTransformation(n,t){let r="";for(const l of this.steps)r+=l.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const i=this._cachedProjection[Z.cacheKey(n,t)];return i===void 0?null:i}};function wn(e,n,t){if(n==null||t==null||t.vcsWkid||ee(n,t)||$(n)||$(t))return null;const r=Fe(n)/Fe(t);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>$n(i,r);case"polyline":case"esriGeometryPolyline":return i=>vn(i,r);case"polygon":case"esriGeometryPolygon":return i=>Gn(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>In(i,r);case"extent":case"esriGeometryEnvelope":return i=>Tn(i,r);default:return null}}function $n(e,n){(e==null?void 0:e.z)!=null&&(e.z*=n)}function Gn(e,n){if(e)for(const t of e.rings)for(const r of t)r.length>2&&(r[2]*=n)}function vn(e,n){if(e)for(const t of e.paths)for(const r of t)r.length>2&&(r[2]*=n)}function In(e,n){if(e)for(const t of e.points)t.length>2&&(t[2]*=n)}function Tn(e,n){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=n,e.zmax*=n)}let O=null,G=null,X=null,oe={};const Ie=new tn;function Se(){return!!O&&nn()}function Wn(){return!!Se()||(Xe(Ie),ne(),!1)}function ne(e){return X==null&&(X=Promise.all([Vt(),ce(()=>import("./geometryEngineBase-bb31a5ba.js"),["./geometryEngineBase-bb31a5ba.js","./commonjsHelpers-2f3e7994.js"],import.meta.url).then(n=>n.g),ce(()=>import("./hydrated-5c768c60.js"),["./hydrated-5c768c60.js","./uuid-fb53ae2e.js","./index-e42a63f9.js"],import.meta.url)])),X.then(([,n,{hydratedAdapter:t}])=>{Zt(e),G=t,O=n.default,O._enableProjection(Jt),Ie.notify()})}function ft(e,n,t=null,r=null){return Array.isArray(e)?e.length===0?[]:Ne(G,e,e[0].spatialReference,n,t,r):Ne(G,[e],e.spatialReference,n,t,r)[0]}function Ne(e,n,t,r,i=null,l=null){if(t==null||r==null)return n;if(se(t,r,i))return n.map(a=>ue(a,t,r));if(i==null&&Oe(t))return n.map(a=>ue(a,t,B.WGS84)).map(a=>re(a,r));if(i==null&&Oe(r))return n.map(a=>re(a,B.WGS84)).map(a=>ue(a,B.WGS84,r));if(i==null){const a=de.cacheKey(t,r);oe[a]!==void 0?i=oe[a]:((i=dt(t,r,void 0))==null&&(i=new de),oe[a]=i)}if(O==null||e==null)throw new Re;return l!=null?O._project(e,n,t,r,i,l):O._project(e,n,t,r,i)}function Fn(e,n){const t=pt([e],n);return t.pending!=null?{pending:t.pending,geometry:null}:t.geometries!=null?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function pt(e,n){if(!Se()){for(const t of e)if(t!=null&&!ee(t.spatialReference,n)&&U(t.spatialReference)&&U(n)&&!se(t.spatialReference,n))return Xe(Ie),{pending:ne(),geometries:null}}return{pending:null,geometries:e.map(t=>t==null?null:ee(t.spatialReference,n)?t:U(t.spatialReference)&&U(n)?re(t,n):null)}}function dt(e,n,t=null){if(e==null||n==null)return null;if(O==null||G==null)throw new Re;const r=O._getTransformation(G,e,n,t,t==null?void 0:t.spatialReference);return r!==null?de.fromGE(r):null}function bn(e,n,t=null){if(O==null||G==null)throw new Re;const r=O._getTransformationBySuitability(G,e,n,t,t==null?void 0:t.spatialReference);if(r!==null){const i=[];for(const l of r)i.push(de.fromGE(l));return i}return[]}class Re extends Je{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function Hn(){O=null,G=null,X=null,oe={}}const jn={get loadPromise(){return X}};function re(e,n){try{const t=ft(e,n);if(t==null)return null;"xmin"in e&&"xmin"in t&&(t.zmin=e.zmin,t.zmax=e.zmax);const r=wn(t.type,e.spatialReference,n);return r!=null&&r(t),t}catch(t){if(!(t instanceof Re))throw t;return null}}async function kn(e,n,t){const r=e.spatialReference;return r!=null&&n!=null&&await ht(r,n,null,t),re(e,n)}function se(e,n,t){return!t&&(!!ee(e,n)||U(e)&&U(n)&&!!ot(e,n,ct))}async function ht(e,n,t,r){if(Se())return be(r);if(Array.isArray(e)){for(const{source:i,dest:l,geographicTransformation:a}of e)if(!se(i,l,a))return ne(r)}else if(!se(e,n,t))return ne(r);return be(r)}function ue(e,n,t){return e?"x"in e?_t(e,n,new Qt,t,0):"xmin"in e?Ct(e,n,new we,t,0):"rings"in e?At(e,n,new Xt,t,0):"paths"in e?Rt(e,n,new Yt,t,0):"points"in e?St(e,n,new en,t,0):null:null}function Un(e,n,t=n.spatialReference,r=0){return t!=null&&e.spatialReference!=null&&_t(e,e.spatialReference,n,t,r)!=null}function _t(e,n,t,r,i){A[0]=e.x,A[1]=e.y;const l=e.z;return A[2]=l!==void 0?l:i,ie(A,n,0,A,r,0,1)?(t.x=A[0],t.y=A[1],t.spatialReference=r,l!==void 0||$(r)?(t.z=A[2],t.hasZ=!0):(t.z=void 0,t.hasZ=!1),e.m===void 0?(t.m=void 0,t.hasM=!1):(t.m=e.m,t.hasM=!0),t):null}function xn(e,n,t=n.spatialReference,r=0){return e.spatialReference!=null&&t!=null&&St(e,e.spatialReference,n,t,r)!=null}function St(e,n,t,r,i){const{points:l,hasZ:a,hasM:o}=e,u=[],p=l.length,f=[];for(const S of l)f.push(S[0],S[1],a?S[2]:i);if(!ie(f,n,0,f,r,0,p))return null;const h=a||$(r);for(let S=0;S<p;++S){const L=3*S,M=f[L],E=f[L+1];h&&o?u.push([M,E,f[L+2],l[S][3]]):h?u.push([M,E,f[L+2]]):o?u.push([M,E,l[S][2]]):u.push([M,E])}return t.points=u,t.spatialReference=r,t.hasZ=a,t.hasM=o,t}function Bn(e,n,t=n.spatialReference,r=0){return e.spatialReference!=null&&t!=null&&Rt(e,e.spatialReference,n,t,r)!=null}function Rt(e,n,t,r,i){const{paths:l,hasZ:a,hasM:o}=e,u=[];if(!Et(l,a??!1,o??!1,n,u,r,i))return null;const p=a||$(r);return t.paths=u,t.spatialReference=r,t.hasZ=p,t.hasM=o,t}function Kn(e,n,t=n.spatialReference,r=0){return e.spatialReference!=null&&t!=null&&At(e,e.spatialReference,n,t,r)!=null}function At(e,n,t,r,i){const{rings:l,hasZ:a,hasM:o}=e,u=[];if(!Et(l,a??!1,o??!1,n,u,r,i))return null;const p=a||$(r);return t.rings=u,t.spatialReference=r,t.hasZ=p,t.hasM=o,t}function Dn(e,n,t=n.spatialReference,r=0){return e.spatialReference!=null&&t!=null&&Ct(e,e.spatialReference,n,t,r)!=null}function Ct(e,n,t,r,i){const{xmin:l,ymin:a,xmax:o,ymax:u,hasZ:p,hasM:f}=e,h=p?e.zmin:i;if(!Ke(l,a,h,n,A,r))return null;const S=p||$(r);t.xmin=A[0],t.ymin=A[1],S&&(t.zmin=A[2]);const L=p?e.zmax:i;return Ke(o,u,L,n,A,r)?(t.xmax=A[0],t.ymax=A[1],S&&(t.zmax=A[2]),f&&(t.mmin=e.mmin,t.mmax=e.mmax),t.spatialReference=r,t):null}function Et(e,n,t,r,i,l,a=0){const o=new Array;for(const f of e)for(const h of f)o.push(h[0],h[1],n?h[2]:a);if(!ie(o,r,0,o,l,0,o.length/3))return!1;let u=0;i.length=0;const p=n||$(l);for(const f of e){const h=new Array;for(const S of f)p&&t?h.push([o[u++],o[u++],o[u++],S[3]]):p?h.push([o[u++],o[u++],o[u++]]):t?(h.push([o[u++],o[u++],S[2]]),u++):(h.push([o[u++],o[u++]]),u++);i.push(h)}return!0}function zn(e){return e!=null&&pn(e)!=null}const A=Qe(),sr=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:zn,canProjectWithoutEngine:se,getTransformation:dt,getTransformations:bn,initializeProjection:ht,isLoaded:Se,isLoadedOrLoad:Wn,load:ne,project:ft,projectExtent:Dn,projectMany:Ne,projectMultipoint:xn,projectOrLoad:Fn,projectOrLoadMany:pt,projectPoint:Un,projectPolygon:Kn,projectPolyline:Bn,projectWithZConversion:kn,projectWithoutEngine:ue,test:jn,tryProjectWithZConversion:re,unload:Hn},Symbol.toStringTag,{value:"Module"})),De={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Pe(e,n,t,r=pe){const i=new Ye(et(r)),l=tt.fromJSDate(e,{zone:i}),a=t==="decades"||t==="centuries"?"year":mt(t);return t==="decades"&&(n*=10),t==="centuries"&&(n*=100),l.plus({[a]:n}).toJSDate()}function ze(e,n,t=pe){const r=new Ye(et(t)),i=tt.fromJSDate(e,{zone:r});if(n==="decades"||n==="centuries"){const a=i.startOf("year"),{year:o}=a,u=o-o%(n==="decades"?10:100);return a.set({year:u}).toJSDate()}const l=mt(n);return i.startOf(l).toJSDate()}function ir(e,n,t){return e===0?0:e*De[n]/De[t]}function mt(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var g;let m=g=class extends nt{static get allTime(){return qe}static get empty(){return qn}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,n){return n.end!=null?new Date(n.end):null}writeEnd(e,n){n.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(g.allTime)}get isEmpty(){return this.equals(g.empty)}readStart(e,n){return n.start!=null?new Date(n.start):null}writeStart(e,n){n.start=(e==null?void 0:e.getTime())??null}clone(){return new g({end:this.end,start:this.start})}equals(e){var l,a,o,u;if(!e)return!1;const n=((l=this.start)==null?void 0:l.getTime())??this.start,t=((a=this.end)==null?void 0:a.getTime())??this.end,r=((o=e.start)==null?void 0:o.getTime())??e.start,i=((u=e.end)==null?void 0:u.getTime())??e.end;return n===r&&t===i}expandTo(e,n=pe){if(this.isEmpty||this.isAllTime)return this.clone();let t=this.start;t&&(t=ze(t,e,n));let r=this.end;if(r){const i=ze(r,e,n);r=r.getTime()===i.getTime()?i:Pe(i,1,e,n)}return new g({start:t,end:r})}intersection(e){var o,u,p,f;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return g.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const n=((o=this.start)==null?void 0:o.getTime())??-1/0,t=((u=this.end)==null?void 0:u.getTime())??1/0,r=((p=e.start)==null?void 0:p.getTime())??-1/0,i=((f=e.end)==null?void 0:f.getTime())??1/0;let l,a;if(r>=n&&r<=t?l=r:n>=r&&n<=i&&(l=n),t>=r&&t<=i?a=t:i>=n&&i<=t&&(a=i),l!=null&&a!=null&&!isNaN(l)&&!isNaN(a)){const h=new g;return h.start=l===-1/0?null:new Date(l),h.end=a===1/0?null:new Date(a),h}return g.empty}offset(e,n,t=pe){if(this.isEmpty||this.isAllTime)return this.clone();const r=new g,{start:i,end:l}=this;return i!=null&&(r.start=Pe(i,e,n,t)),l!=null&&(r.end=Pe(l,e,n,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return qe.clone();const n=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,t=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new g({start:n,end:t})}};c([_({type:Date,json:{write:{allowNull:!0}}})],m.prototype,"end",void 0),c([x("end")],m.prototype,"readEnd",null),c([Le("end")],m.prototype,"writeEnd",null),c([_({readOnly:!0,json:{read:!1}})],m.prototype,"isAllTime",null),c([_({readOnly:!0,json:{read:!1}})],m.prototype,"isEmpty",null),c([_({type:Date,json:{write:{allowNull:!0}}})],m.prototype,"start",void 0),c([x("start")],m.prototype,"readStart",null),c([Le("start")],m.prototype,"writeStart",null),m=g=c([$e("esri.TimeExtent")],m);const qe=new m,qn=new m({start:void 0,end:void 0}),lr=m;var J;const he=rt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),yt=he.jsonValues.slice();rn(yt,"orthometric");const Y=rt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let P=J=class extends nt{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,n,t){return he.write(e,n,t)}readHeightModel(e,n,t){return he.read(e)||(t!=null&&t.messages&&t.messages.push(Vn(e,{context:t})),null)}readHeightUnit(e,n,t){return Y.read(e)||(t!=null&&t.messages&&t.messages.push(Ve(e,{context:t})),null)}readHeightUnitService(e,n,t){return sn(e)||Y.read(e)||(t!=null&&t.messages&&t.messages.push(Ve(e,{context:t})),null)}readVertCRS(e,n){return n.vertCRS||n.ellipsoid||n.geoid}clone(){return new J({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,n){const t=ln(n);return new J({heightModel:e.heightModel,heightUnit:t,vertCRS:e.vertCRS})}write(e,n){return n={origin:"web-scene",...n},super.write(e,n)}static fromJSON(e){if(!e)return null;const n=new J;return n.read(e,{origin:"web-scene"}),n}};function Ve(e,n){return new st("height-unit:unsupported",`Height unit of value '${e}' is not supported`,n)}function Vn(e,n){return new st("height-model:unsupported",`Height model of value '${e}' is not supported`,n)}c([_({type:he.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:yt,default:"ellipsoidal"}}}})],P.prototype,"heightModel",void 0),c([Le("web-scene","heightModel")],P.prototype,"writeHeightModel",null),c([x(["web-scene","service"],"heightModel")],P.prototype,"readHeightModel",null),c([_({type:Y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Y.jsonValues,write:Y.write}}}})],P.prototype,"heightUnit",void 0),c([x("web-scene","heightUnit")],P.prototype,"readHeightUnit",null),c([x("service","heightUnit")],P.prototype,"readHeightUnitService",null),c([_({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],P.prototype,"vertCRS",void 0),c([x("service","vertCRS",["vertCRS","ellipsoid","geoid"])],P.prototype,"readVertCRS",null),P=J=c([$e("esri.geometry.HeightModelInfo")],P);const ar=P,gt={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},Pt=Object.values(gt),Ot=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Pt.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Zn=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${Pt.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Jn=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function or(e){return!!Ot.test(e)}function Lt(e){if(e==null)return null;const n=_e(e),t=(n==null?void 0:n.path.match(Ot))||(n==null?void 0:n.path.match(Zn));if(!t)return null;const[,r,i,l,a]=t,o=i.indexOf("/");return{title:Mt(o!==-1?i.slice(o+1):i),serverType:gt[l.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:r}}}function Qn(e){const n=_e(e).path.match(Jn);return n?{serviceUrl:n[1],sublayerId:Number(n[2])}:null}function Mt(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function ur(e,n){const t=[];if(e){const r=Lt(e);r!=null&&r.title&&t.push(r.title)}if(n){const r=Mt(n);t.push(r)}if(t.length===2){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function cr(e){if(!e)return!1;const n=".arcgis.com/",t="//services",r="//tiles",i="//features",l=(e=e.toLowerCase()).includes(n),a=e.includes(t)||e.includes(r)||e.includes(i);return l&&a}function fr(e,n){return e&&it(lt(e,n))}function pr(e){let{url:n}=e;if(!n)return{url:n};n=lt(n,e.logger);const t=_e(n),r=Lt(t.path);let i;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(i=r.sublayer),n=r.url.path;else if(e.nonStandardUrlAllowed){const l=Qn(t.path);l!=null&&(n=l.serviceUrl,i=l.sublayerId)}return{url:it(n),layerId:i}}function dr(e,n,t,r,i){an(n,r,"url",i),r.url&&e.layerId!=null&&(r.url=on(r.url,t,e.layerId.toString()))}function hr(e){if(!e)return!1;const n=e.toLowerCase(),t=n.includes("/services/"),r=n.includes("/mapserver/wmsserver"),i=n.includes("/imageserver/wmsserver"),l=n.includes("/wmsserver");return t&&(r||i||l)}export{nr as A,Ne as B,hr as C,se as D,Se as E,ht as F,dt as K,dr as S,Wn as T,Fn as U,pt as W,ne as _,tr as a,ft as b,lr as c,Qn as d,Pe as e,ar as f,pr as g,ur as h,Kn as i,ir as j,Me as k,Nn as l,Mt as m,ie as n,wn as o,Lt as p,s as q,De as r,de as s,at as t,rr as u,or as v,cr as w,sr as x,fr as y};
