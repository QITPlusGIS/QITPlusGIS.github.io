import{c as u,a as p}from"./devEnvironmentUtils-4eab2a99.js";import{o as m,W as l,Y as b,a1 as f,ck as w}from"./uuid-8543c34e.js";import{c as d,w as h,b as i,p as c,d as g}from"./styleUtils-94d35cb4.js";import{getStyleItemFromStyle as S}from"./webStyleSymbolUtils-4ac9839a.js";import"./index-71f6c0ac.js";import"./jsonUtils-f5725ae9.js";import"./layerUtils-60bab848.js";async function x(t,a,e){if(!t.name)throw new m("style-symbol-reference-name-missing","Missing name in style symbol reference");if(t.styleName&&t.styleName==="Esri2DPointSymbolsStyle")return $(t,e);try{return N(await d(t,a,e),t.name,a,e)}catch(n){return l(n),null}}async function $(t,a){const e=h.replaceAll(/\{SymbolName\}/gi,t.name);try{const n=await i(e,a);return c(n.data)}catch(n){return l(n),null}}async function N(t,a,e,n){const y={portal:(e==null?void 0:e.portal)!=null?e.portal:b.getDefault(),url:f(t.baseUrl),origin:"portal-item"},s=S(a,t.data);if(!s)throw new m("symbolstyleutils:symbol-name-not-found",`The symbol name '${a}' could not be found`,{symbolName:a});let r=w(g(s,"cimRef"),y);u()&&(r=p(r));try{const o=await i(r,n);return c(o.data)}catch(o){return l(o),null}}export{x as fetchCIMSymbolReference};
