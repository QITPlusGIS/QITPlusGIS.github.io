import{a5 as o,o as f,cm as d,X as m,Z as b,z as p,$ as h,dw as w}from"./uuid-De2V3pkO.js";const g=()=>!!o("enable-feature:force-wosr"),$=()=>o.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),j=()=>o.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),N=()=>o.add("enable-i3s-patching",!0,!0,!0),U=()=>o.add("enable-i3s-patching",!1,!0,!0),L=()=>!!o("enable-feature:SceneLayer-editing"),R=(e="i3s-patching")=>{switch(U(),j(),o.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":$();break;case"i3s-patching":N()}};R("i3s-patching");let u={};async function S(e,r){try{return{data:(await A(e,r)).data,baseUrl:d(e),styleUrl:e}}catch(t){return m(t),null}}function I(e,r,t){const s=r.portal!=null?r.portal:b.getDefault();let n;const l=`${s.url} - ${s.user&&s.user.username} - ${e}`;return u[l]||(u[l]=q(e,s,t).then((a=>(n=a,a.fetchData()))).then((a=>({data:a,baseUrl:n.itemUrl??"",styleName:e})))),u[l]}function q(e,r,t){return r.load(t).then((()=>{const s=new w({disableExtraQuery:!0,query:`owner:${c} AND type:${i} AND typekeywords:"${e}"`});return r.queryItems(s,t)})).then((({results:s})=>{let n=null;const l=e.toLowerCase();if(s&&Array.isArray(s)){for(const a of s)if(a.typeKeywords?.some((y=>y.toLowerCase()===l))&&a.type===i&&a.owner===c){n=a;break}}if(!n)throw new f("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(t)}))}function k(e,r,t){return e?.styleUrl!=null?S(e.styleUrl,t):e?.styleName!=null?I(e.styleName,r,t):Promise.reject(new f("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function v(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function x(e,r,t=["gltf"]){if(r==="cimRef")return e.cimRef;if(e.formatInfos&&!g())for(const s of t){const n=e.formatInfos.find((l=>l.type===s));if(n)return n.href}return e.webRef}function A(e,r){const t={responseType:"json",query:{f:"json"},...r};return p(h(e),t)}const c="esri_en",i="Style",E="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{A as b,k as c,x as d,L as n,v as p,E as w};
