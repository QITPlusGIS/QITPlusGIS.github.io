import{cn as b,dx as c,o as y,dy as m,cG as p,dz as d,cI as w,cJ as g,cK as C,dA as x,dB as h,cZ as D,dC as I,dD as $,dE as L}from"./uuid-De2V3pkO.js";import{y as M}from"./layerUtils-D8dZn4eh.js";const a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function k(e,s=a){if(!e)return{symbol:null};const{retainId:l=a.retainId,ignoreDrivers:o=a.ignoreDrivers,hasLabelingContext:r=a.hasLabelingContext,retainCIM:i=a.retainCIM}=s;let n=null;if(b(e)||e instanceof c)n=e.clone();else if(e.type==="cim"){const t=e.data?.symbol?.type;if(t!=="CIMPointSymbol")return{error:new y("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${t||"unknown"}' is unsupported in 3D`,{symbol:e})};n=i?e.clone():m.fromCIMSymbol(e)}else if(e instanceof p)n=d.fromSimpleLineSymbol(e);else if(e instanceof w)n=m.fromSimpleMarkerSymbol(e);else if(e instanceof g)n=m.fromPictureMarkerSymbol(e);else if(e instanceof C)n=s.geometryType&&s.geometryType==="mesh"?x.fromSimpleFillSymbol(e):h.fromSimpleFillSymbol(e);else{if(!(e instanceof D))return{error:new y("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};n=r?I.fromTextSymbol(e):m.fromTextSymbol(e)}return l&&n&&n.type!=="cim"&&(n.id=e.id),o&&b(n)&&n.symbolLayers.forEach((t=>t.ignoreDrivers=!0)),{symbol:n}}function E(e,s,l,o){const r=f(e,{},{context:o,isLabelSymbol:!1});r!=null&&(s[l]=r)}function F(e,s,l,o){const r=f(e,{},{context:o,isLabelSymbol:!0});r!=null&&(s[l]=r)}function u(e){return e instanceof L||e instanceof c}function f(e,s,l){if(e==null)return null;const{context:o,isLabelSymbol:r}=l,i=o?.origin,n=o?.messages;if(i==="web-scene"&&!u(e)){const t=k(e,{retainCIM:!0,hasLabelingContext:r});return t.symbol!=null?t.symbol.write(s,o):(n?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:o,error:t.error})),null)}return(i==="web-map"||i==="portal-item"&&!M(o?.layer))&&u(e)?(n?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:o})),null):e.write(s,o)}function P(e,s){return $(e,null,s)}export{P as b,F as i,E as l};
