import{ak as Ve,eV as We,o as $,eW as Ze,eX as Ke,eY as Le,eZ as Qe}from"./uuid-fb53ae2e.js";import{e as Ot}from"./mat4f32-60a2394b.js";import{s as q,o as I}from"./mat4-f091cc2b.js";const tr=(r,o)=>{const u=q(r,o,0,0,0,0,o,0,0,0,0,o,0,0,0,0,1);return I(u,u)},er=(r,o)=>{const u=q(r,o,0,0,.5-.5*o,0,o,0,.5-.5*o,0,0,o,.5-.5*o,0,0,0,1);return I(u,u)},rr=(r,o)=>{const u=1-o,l=q(r,.2126+.7874*u,.7152-.7152*u,.0722-.0722*u,0,.2126-.2126*u,.7152+.2848*u,.0722-.0722*u,0,.2126-.2126*u,.7152-.7152*u,.0722+.9278*u,0,0,0,0,1);return I(l,l)},nr=(r,o)=>{const u=Math.sin(o*Math.PI/180),l=Math.cos(o*Math.PI/180),s=q(r,.213+.787*l-.213*u,.715-.715*l-.715*u,.072-.072*l+.928*u,0,.213-.213*l+.143*u,.715+.285*l+.14*u,.072-.072*l-.283*u,0,.213-.213*l-.787*u,.715-.715*l+.715*u,.072+.928*l+.072*u,0,0,0,0,1);return I(s,s)},or=(r,o)=>{const u=1-2*o,l=q(r,u,0,0,o,0,u,0,o,0,0,u,o,0,0,0,1);return I(l,l)},ar=(r,o)=>{const u=q(r,.213+.787*o,.715-.715*o,.072-.072*o,0,.213-.213*o,.715+.285*o,.072-.072*o,0,.213-.213*o,.715-.715*o,.072+.928*o,0,0,0,0,1);return I(u,u)},ur=(r,o)=>{const u=1-o,l=q(r,.393+.607*u,.769-.769*u,.189-.189*u,0,.349-.349*u,.686+.314*u,.168-.168*u,0,.272-.272*u,.534-.534*u,.131+.869*u,0,0,0,0,1);return I(l,l)};class V{constructor(o,u,l){this.strength=o,this.radius=u,this.threshold=l,this.type="bloom"}interpolate(o,u,l){this.strength=C(o.strength,u.strength,l),this.radius=C(o.radius,u.radius,l),this.threshold=C(o.threshold,u.threshold,l)}clone(){return new V(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:T(this.radius),strength:this.strength,threshold:this.threshold}}}let Rt=class St{constructor(o){this.radius=o,this.type="blur"}interpolate(o,u,l){this.radius=Math.round(C(o.radius,u.radius,l))}clone(){return new St(this.radius)}toJSON(){return{type:"blur",radius:T(this.radius)}}};class U{constructor(o,u){this.type=o,this.amount=u,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(o,u,l){this.amount=C(o.amount,u.amount,l),this._updateMatrix()}clone(){return new U(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const o=this._colorMatrix||Ot();switch(this.type){case"brightness":this._colorMatrix=tr(o,this.amount);break;case"contrast":this._colorMatrix=er(o,this.amount);break;case"grayscale":this._colorMatrix=rr(o,this.amount);break;case"invert":this._colorMatrix=or(o,this.amount);break;case"saturate":this._colorMatrix=ar(o,this.amount);break;case"sepia":this._colorMatrix=ur(o,this.amount)}}}let kt=class Nt{constructor(o,u,l,s){this.offsetX=o,this.offsetY=u,this.blurRadius=l,this.color=s,this.type="drop-shadow"}interpolate(o,u,l){this.offsetX=C(o.offsetX,u.offsetX,l),this.offsetY=C(o.offsetY,u.offsetY,l),this.blurRadius=C(o.blurRadius,u.blurRadius,l),this.color[0]=Math.round(C(o.color[0],u.color[0],l)),this.color[1]=Math.round(C(o.color[1],u.color[1],l)),this.color[2]=Math.round(C(o.color[2],u.color[2],l)),this.color[3]=C(o.color[3],u.color[3],l)}clone(){return new Nt(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const o=[...this.color];return o[3]*=255,{type:"drop-shadow",xoffset:T(this.offsetX),yoffset:T(this.offsetY),blurRadius:T(this.blurRadius),color:o}}},jt=class Xt{constructor(o){this.angle=o,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(o,u,l){this.angle=C(o.angle,u.angle,l),this._updateMatrix()}clone(){return new Xt(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const o=this._colorMatrix||Ot();this._colorMatrix=nr(o,this.angle)}};class W{constructor(o){this.amount=o,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(o,u,l){this.amount=C(o.amount,u.amount,l)}clone(){return new W(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function C(r,o,u){return r+(o-r)*u}function T(r){return Math.round(1e3*Ve(r))/1e3}function ir(r){switch(r.type){case"grayscale":case"sepia":case"invert":return new U(r.type,0);case"saturate":case"brightness":case"contrast":return new U(r.type,1);case"opacity":return new W(1);case"hue-rotate":return new jt(0);case"blur":return new Rt(0);case"drop-shadow":return new kt(0,0,0,[...We("transparent")]);case"bloom":return new V(0,0,1)}}function sr(r,o){const u=r.length>o.length?r:o;return(r.length>o.length?o:r).every((l,s)=>l.type===u[s].type)}function cr(r,o){const u=r.length>o.length?r:o,l=r.length>o.length?o:r;for(let s=l.length;s<u.length;s++)l.push(ir(u[s]))}function Sr(r){const o=r[0];return!!o&&"type"in o}var Ft,Et,tt={exports:{}};tt.exports,Et=function(){function r(s,d){function v(){this.constructor=s}v.prototype=d.prototype,s.prototype=new v}function o(s,d,v,e){var y=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(y,o.prototype),y.expected=d,y.found=v,y.location=e,y.name="SyntaxError",y}function u(s,d,v){return v=v||" ",s.length>d?s:(d-=s.length,s+(v+=v.repeat(d)).slice(0,d))}function l(s,d){var v,e={},y=(d=d!==void 0?d:{}).grammarSource,_={start:$t},X=$t,Y="none",J=")",m=",",w="(",O="%",b="px",ot="cm",at="mm",ut="in",it="pt",st="pc",ct="deg",lt="rad",ft="grad",ht="turn",qt="#",It=".",Jt="e",pt=/^[ \t\n\r]/,mt=/^[a-z\-]/,gt=/^[0-9a-fA-F]/,dt=/^[+\-]/,N=/^[0-9]/,Pt=k("none"),zt=A("none",!1),Tt=A(")",!1),yt=A(",",!1),Ut=k("whitespace"),vt=z([" ","	",`
`,"\r"],!1,!1),Bt=k("function"),Dt=A("(",!1),Gt=k("identifier"),wt=z([["a","z"],"-"],!1,!1),Ht=k("percentage"),Vt=A("%",!1),Wt=k("length"),Zt=A("px",!1),Kt=A("cm",!1),Lt=A("mm",!1),Qt=A("in",!1),te=A("pt",!1),ee=A("pc",!1),re=k("angle"),ne=A("deg",!1),oe=A("rad",!1),ae=A("grad",!1),ue=A("turn",!1),ie=k("number"),se=k("color"),ce=A("#",!1),xt=z([["0","9"],["a","f"],["A","F"]],!1,!1),bt=z(["+","-"],!1,!1),j=z([["0","9"]],!1,!1),le=A(".",!1),fe=A("e",!1),he=function(){return[]},pe=function(t,a){return{type:"function",name:t,parameters:a||[]}},me=function(t,a){return a.length>0?He(t,a,3):[t]},ge=function(t){return{type:"quantity",value:t.value,unit:t.unit}},de=function(t){return{type:"color",colorType:t.type,value:t.value}},ye=function(t){return t},ve=function(){return G()},we=function(t){return{value:t,unit:"%"}},xe=function(t){return{value:t,unit:"px"}},be=function(t){return{value:t,unit:"cm"}},Ae=function(t){return{value:t,unit:"mm"}},Me=function(t){return{value:t,unit:"in"}},$e=function(t){return{value:t,unit:"pt"}},Ce=function(t){return{value:t,unit:"pc"}},Fe=function(t){return{value:t,unit:"deg"}},Ee=function(t){return{value:t,unit:"rad"}},_e=function(t){return{value:t,unit:"grad"}},Oe=function(t){return{value:t,unit:"turn"}},Re=function(t){return{value:t,unit:null}},Se=function(){return{type:"hex",value:G()}},ke=function(t){return{type:"function",value:t}},Ne=function(){return{type:"named",value:G()}},je=function(){return parseFloat(G())},n=0,g=0,D=[{line:1,column:1}],S=0,K=[],c=0;if("startRule"in d){if(!(d.startRule in _))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');X=_[d.startRule]}function G(){return s.substring(g,n)}function A(t,a){return{type:"literal",text:t,ignoreCase:a}}function z(t,a,i){return{type:"class",parts:t,inverted:a,ignoreCase:i}}function Xe(){return{type:"end"}}function k(t){return{type:"other",description:t}}function At(t){var a,i=D[t];if(i)return i;for(a=t-1;!D[a];)a--;for(i={line:(i=D[a]).line,column:i.column};a<t;)s.charCodeAt(a)===10?(i.line++,i.column=1):i.column++,a++;return D[t]=i,i}function Mt(t,a,i){var h=At(t),x=At(a),p={source:y,start:{offset:t,line:h.line,column:h.column},end:{offset:a,line:x.line,column:x.column}};return i&&y&&typeof y.offset=="function"&&(p.start=y.offset(p.start),p.end=y.offset(p.end)),p}function f(t){n<S||(n>S&&(S=n,K=[]),K.push(t))}function Ye(t,a,i){return new o(o.buildMessage(t,a),t,a,i)}function $t(){var t;return(t=qe())===e&&(t=Ie()),t}function qe(){var t,a;return c++,t=n,M(),s.substr(n,4)===Y?(a=Y,n+=4):(a=e,c===0&&f(zt)),a!==e?(M(),g=t,t=he()):(n=t,t=e),c--,t===e&&c===0&&f(Pt),t}function Ie(){var t,a;if(t=[],(a=L())!==e)for(;a!==e;)t.push(a),a=L();else t=e;return t}function L(){var t,a,i,h;return t=n,M(),(a=Pe())!==e?(M(),(i=Je())===e&&(i=null),M(),s.charCodeAt(n)===41?(h=J,n++):(h=e,c===0&&f(Tt)),h!==e?(M(),g=t,t=pe(a,i)):(n=t,t=e)):(n=t,t=e),t}function Je(){var t,a,i,h,x,p,E,H;if(t=n,(a=Q())!==e){for(i=[],h=n,x=M(),s.charCodeAt(n)===44?(p=m,n++):(p=e,c===0&&f(yt)),p===e&&(p=null),E=M(),(H=Q())!==e?h=x=[x,p,E,H]:(n=h,h=e);h!==e;)i.push(h),h=n,x=M(),s.charCodeAt(n)===44?(p=m,n++):(p=e,c===0&&f(yt)),p===e&&(p=null),E=M(),(H=Q())!==e?h=x=[x,p,E,H]:(n=h,h=e);g=t,t=me(a,i)}else n=t,t=e;return t}function Q(){var t,a;return t=n,(a=ze())===e&&(a=Te())===e&&(a=Ue())===e&&(a=Be()),a!==e&&(g=t,a=ge(a)),(t=a)===e&&(t=n,(a=De())!==e&&(g=t,a=de(a)),t=a),t}function M(){var t,a;for(c++,t=[],pt.test(s.charAt(n))?(a=s.charAt(n),n++):(a=e,c===0&&f(vt));a!==e;)t.push(a),pt.test(s.charAt(n))?(a=s.charAt(n),n++):(a=e,c===0&&f(vt));return c--,a=e,c===0&&f(Ut),t}function Pe(){var t,a,i;return c++,t=n,(a=Ct())!==e?(s.charCodeAt(n)===40?(i=w,n++):(i=e,c===0&&f(Dt)),i!==e?(g=t,t=ye(a)):(n=t,t=e)):(n=t,t=e),c--,t===e&&(a=e,c===0&&f(Bt)),t}function Ct(){var t,a,i;if(c++,t=n,a=[],mt.test(s.charAt(n))?(i=s.charAt(n),n++):(i=e,c===0&&f(wt)),i!==e)for(;i!==e;)a.push(i),mt.test(s.charAt(n))?(i=s.charAt(n),n++):(i=e,c===0&&f(wt));else a=e;return a!==e&&(g=t,a=ve()),c--,(t=a)===e&&(a=e,c===0&&f(Gt)),t}function ze(){var t,a,i;return c++,t=n,M(),(a=F())!==e?(s.charCodeAt(n)===37?(i=O,n++):(i=e,c===0&&f(Vt)),i!==e?(g=t,t=we(a)):(n=t,t=e)):(n=t,t=e),c--,t===e&&c===0&&f(Ht),t}function Te(){var t,a,i;return c++,t=n,M(),(a=F())!==e?(s.substr(n,2)===b?(i=b,n+=2):(i=e,c===0&&f(Zt)),i!==e?(g=t,t=xe(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(a=F())!==e?(s.substr(n,2)===ot?(i=ot,n+=2):(i=e,c===0&&f(Kt)),i!==e?(g=t,t=be(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(a=F())!==e?(s.substr(n,2)===at?(i=at,n+=2):(i=e,c===0&&f(Lt)),i!==e?(g=t,t=Ae(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(a=F())!==e?(s.substr(n,2)===ut?(i=ut,n+=2):(i=e,c===0&&f(Qt)),i!==e?(g=t,t=Me(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(a=F())!==e?(s.substr(n,2)===it?(i=it,n+=2):(i=e,c===0&&f(te)),i!==e?(g=t,t=$e(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,M(),(a=F())!==e?(s.substr(n,2)===st?(i=st,n+=2):(i=e,c===0&&f(ee)),i!==e?(g=t,t=Ce(a)):(n=t,t=e)):(n=t,t=e)))))),c--,t===e&&c===0&&f(Wt),t}function Ue(){var t,a,i;return c++,t=n,(a=F())!==e?(s.substr(n,3)===ct?(i=ct,n+=3):(i=e,c===0&&f(ne)),i!==e?(g=t,t=Fe(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,(a=F())!==e?(s.substr(n,3)===lt?(i=lt,n+=3):(i=e,c===0&&f(oe)),i!==e?(g=t,t=Ee(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,(a=F())!==e?(s.substr(n,4)===ft?(i=ft,n+=4):(i=e,c===0&&f(ae)),i!==e?(g=t,t=_e(a)):(n=t,t=e)):(n=t,t=e),t===e&&(t=n,(a=F())!==e?(s.substr(n,4)===ht?(i=ht,n+=4):(i=e,c===0&&f(ue)),i!==e?(g=t,t=Oe(a)):(n=t,t=e)):(n=t,t=e)))),c--,t===e&&(a=e,c===0&&f(re)),t}function Be(){var t,a;return c++,t=n,M(),(a=F())!==e?(g=t,t=Re(a)):(n=t,t=e),c--,t===e&&c===0&&f(ie),t}function De(){var t,a,i,h;if(c++,t=n,s.charCodeAt(n)===35?(a=qt,n++):(a=e,c===0&&f(ce)),a!==e){if(i=[],gt.test(s.charAt(n))?(h=s.charAt(n),n++):(h=e,c===0&&f(xt)),h!==e)for(;h!==e;)i.push(h),gt.test(s.charAt(n))?(h=s.charAt(n),n++):(h=e,c===0&&f(xt));else i=e;i!==e?(g=t,t=Se()):(n=t,t=e)}else n=t,t=e;return t===e&&(t=n,(a=L())!==e&&(g=t,a=ke(a)),(t=a)===e&&(t=n,(a=Ct())!==e&&(g=t,a=Ne()),t=a)),c--,t===e&&(a=e,c===0&&f(se)),t}function F(){var t,a,i,h,x,p,E;for(t=n,dt.test(s.charAt(n))?(s.charAt(n),n++):c===0&&f(bt),a=n,i=[],N.test(s.charAt(n))?(h=s.charAt(n),n++):(h=e,c===0&&f(j));h!==e;)i.push(h),N.test(s.charAt(n))?(h=s.charAt(n),n++):(h=e,c===0&&f(j));if(s.charCodeAt(n)===46?(h=It,n++):(h=e,c===0&&f(le)),h!==e){if(x=[],N.test(s.charAt(n))?(p=s.charAt(n),n++):(p=e,c===0&&f(j)),p!==e)for(;p!==e;)x.push(p),N.test(s.charAt(n))?(p=s.charAt(n),n++):(p=e,c===0&&f(j));else x=e;x!==e?a=i=[i,h,x]:(n=a,a=e)}else n=a,a=e;if(a===e)if(a=[],N.test(s.charAt(n))?(i=s.charAt(n),n++):(i=e,c===0&&f(j)),i!==e)for(;i!==e;)a.push(i),N.test(s.charAt(n))?(i=s.charAt(n),n++):(i=e,c===0&&f(j));else a=e;if(a!==e){if(i=n,s.charCodeAt(n)===101?(h=Jt,n++):(h=e,c===0&&f(fe)),h!==e){if(dt.test(s.charAt(n))?(x=s.charAt(n),n++):(x=e,c===0&&f(bt)),x===e&&(x=null),p=[],N.test(s.charAt(n))?(E=s.charAt(n),n++):(E=e,c===0&&f(j)),E!==e)for(;E!==e;)p.push(E),N.test(s.charAt(n))?(E=s.charAt(n),n++):(E=e,c===0&&f(j));else p=e;p!==e?i=h=[h,x,p]:(n=i,i=e)}else n=i,i=e;i===e&&(i=null),g=t,t=je()}else n=t,t=e;return t}function Ge(t,a){return t.map(function(i){return i[a]})}function He(t,a,i){return[t].concat(Ge(a,i))}if((v=X())!==e&&n===s.length)return v;throw v!==e&&n<s.length&&f(Xe()),Ye(K,S<s.length?s.charAt(S):null,S<s.length?Mt(S,S+1):Mt(S,S))}return r(o,Error),o.prototype.format=function(s){var d="Error: "+this.message;if(this.location){var v,e=null;for(v=0;v<s.length;v++)if(s[v].source===this.location.source){e=s[v].text.split(/\r\n|\n|\r/g);break}var y=this.location.start,_=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(y):y,X=this.location.source+":"+_.line+":"+_.column;if(e){var Y=this.location.end,J=u("",_.line.toString().length," "),m=e[y.line-1],w=(y.line===Y.line?Y.column:m.length+1)-y.column||1;d+=`
 --> `+X+`
`+J+` |
`+_.line+" | "+m+`
`+J+" | "+u("",y.column-1," ")+u("",w,"^")}else d+=`
 at `+X}return d},o.buildMessage=function(s,d){var v={literal:function(m){return'"'+y(m.text)+'"'},class:function(m){var w=m.parts.map(function(O){return Array.isArray(O)?_(O[0])+"-"+_(O[1]):_(O)});return"["+(m.inverted?"^":"")+w.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function e(m){return m.charCodeAt(0).toString(16).toUpperCase()}function y(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(w){return"\\x0"+e(w)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(w){return"\\x"+e(w)})}function _(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(w){return"\\x0"+e(w)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(w){return"\\x"+e(w)})}function X(m){return v[m.type](m)}function Y(m){var w,O,b=m.map(X);if(b.sort(),b.length>0){for(w=1,O=1;w<b.length;w++)b[w-1]!==b[w]&&(b[O]=b[w],O++);b.length=O}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function J(m){return m?'"'+y(m)+'"':"end of input"}return"Expected "+Y(s)+" but "+J(d)+" found."},{SyntaxError:o,parse:l}},(Ft=tt).exports&&(Ft.exports=Et());var lr=tt.exports;function kr(r){if(!r||r.length===0)return null;if(typeof r=="string"){const u=_t(r);return u&&u.length!==0?u:null}const o=r.map(u=>{if(!Number.isFinite(u.scale)||u.scale<=0)throw new $("effect:invalid-scale","scale must be finite and greater than 0",{stop:u});return{scale:u.scale,effects:_t(u.value)}});o.sort((u,l)=>l.effects.length-u.effects.length);for(let u=0;u<o.length-1;u++){if(!sr(o[u].effects,o[u+1].effects))throw new $("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:o[u].effects,b:o[u+1].effects});cr(o[u].effects,o[u+1].effects)}return o.sort((u,l)=>l.scale-u.scale),o}function _t(r){let o;if(!r)return[];try{o=lr.parse(r)}catch(u){throw new $("effect:invalid-syntax","Invalid effect syntax",{value:r,error:u})}return o.map(u=>fr(u))}function fr(r){try{switch(r.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return hr(r);case"opacity":return pr(r);case"hue-rotate":return mr(r);case"blur":return gr(r);case"drop-shadow":return dr(r);case"bloom":return yr(r)}}catch(o){throw o.details.filter=r,o}throw new $("effect:unknown-effect",`Effect '${r.name}' is not supported`,{effect:r})}function hr(r){let o=1;return P(r.parameters,1),r.parameters.length===1&&(o=R(r.parameters[0])),new U(r.name,o)}function pr(r){let o=1;return P(r.parameters,1),r.parameters.length===1&&(o=R(r.parameters[0])),new W(o)}function mr(r){let o=0;return P(r.parameters,1),r.parameters.length===1&&(o=Mr(r.parameters[0])),new jt(o)}function gr(r){let o=0;return P(r.parameters,1),r.parameters.length===1&&(o=nt(r.parameters[0]),B(o,r.parameters[0])),new Rt(o)}function dr(r){const o=[];let u=null;for(const l of r.parameters)if(l.type==="color"){if(o.length&&Object.freeze(o),u)throw new $("effect:type-error","Accepts only one color",{});u=$r(l)}else{const s=nt(l);if(Object.isFrozen(o))throw new $("effect:type-error","<length> parameters not consecutive",{lengths:o});o.push(s),o.length===3&&B(s,l)}if(o.length<2||o.length>3)throw new $("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${o.length}}`,{lengths:o});return new kt(o[0],o[1],o[2]||0,u||Yt("black"))}function yr(r){let o=1,u=0,l=0;return P(r.parameters,3),r.parameters[0]&&(o=R(r.parameters[0])),r.parameters[1]&&(u=nt(r.parameters[1]),B(u,r.parameters[1])),r.parameters[2]&&(l=R(r.parameters[2])),new V(o,u,l)}function P(r,o){if(r.length>o)throw new $("effect:type-error",`Function supports up to ${o} parameters, Actual: ${r.length}`,{parameters:r})}function Z(r){if(r.type==="color")return"<color>";if(r.unit){if(r.unit in rt)return"<length>";if(r.unit in et)return"<angle>";if(r.unit==="%")return"<percentage>"}return"<double>"}function B(r,o){if(r<0)throw new $("effect:type-error",`Negative values are not allowed, Actual: ${r}`,{term:o})}function vr(r){if(r.type!=="quantity"||r.unit!==null)throw new $("effect:type-error",`Expected <double>, Actual: ${Z(r)}`,{term:r})}function wr(r){if(r.type!=="quantity"||r.unit!==null&&r.unit!=="%")throw new $("effect:type-error",`Expected <double> or <percentage>, Actual: ${Z(r)}`,{term:r})}const et={deg:1,grad:.9,rad:180/Math.PI,turn:360};function xr(r){if(r.type!=="quantity"||!(r.value===0&&r.unit===null||r.unit&&et[r.unit]!=null))throw new $("effect:type-error",`Expected <angle>, Actual: ${Z(r)}`,{term:r})}const rt={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function br(r){if(r.type!=="quantity"||!(r.value===0&&r.unit===null||r.unit&&rt[r.unit]!=null))throw new $("effect:type-error",`Expected <length>, Actual: ${Z(r)}`,{term:r})}function R(r){wr(r);const o=r.value;return B(o,r),r.unit==="%"?.01*o:o}function Ar(r){return vr(r),B(r.value,r),r.value}function Mr(r){return xr(r),r.value*et[r.unit]||0}function nt(r){return br(r),r.value*rt[r.unit]||0}function $r(r){switch(r.colorType){case"hex":return Ze(r.value);case"named":return Yt(r.value);case"function":return Er(r.value)}}function Yt(r){if(!Ke(r))throw new $("effect:unknown-color",`color '${r}' isn't valid`,{namedColor:r});return Le(r)}const Cr=/^rgba?/i,Fr=/^hsla?/i;function Er(r){if(P(r.parameters,4),Cr.test(r.name))return[R(r.parameters[0]),R(r.parameters[1]),R(r.parameters[2]),r.parameters[3]?R(r.parameters[3]):1];if(Fr.test(r.name))return Qe(Ar(r.parameters[0]),R(r.parameters[1]),R(r.parameters[2]),r.parameters[3]?R(r.parameters[3]):1);throw new $("effect:syntax-error",`Invalid color function '${r.name}'`,{colorFunction:r})}export{cr as e,Sr as l,sr as t,kr as y};
