import{c as u,a as f}from"./devEnvironmentUtils-J1Ooxd8p.js";import{o as m,X as l,a2 as b,Z as p,cl as w}from"./uuid-De2V3pkO.js";import{c as d,w as h,b as c,p as i,d as S}from"./styleUtils-IlLdeGfy.js";import{getStyleItemFromStyle as $}from"./webStyleSymbolUtils-CdLvx_A5.js";import"./index-OAJD89tD.js";import"./jsonUtils-CqYY9-3B.js";import"./layerUtils-D8dZn4eh.js";async function A(t,e,a){if(!t.name)throw new m("style-symbol-reference-name-missing","Missing name in style symbol reference");if(t.styleName&&t.styleName==="Esri2DPointSymbolsStyle")return g(t,a);try{return N(await d(t,e,a),t.name,e,a)}catch(n){return l(n),null}}async function g(t,e){const a=h.replaceAll(/\{SymbolName\}/gi,t.name);try{const n=await c(a,e);return i(n.data)}catch(n){return l(n),null}}async function N(t,e,a,n){const y={portal:a?.portal!=null?a.portal:p.getDefault(),url:b(t.baseUrl)},s=$(e,t.data);if(!s)throw new m("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});let r=w(S(s,"cimRef"),y);u()&&(r=f(r));try{const o=await c(r,n);return i(o.data)}catch(o){return l(o),null}}export{A as fetchCIMSymbolReference};
