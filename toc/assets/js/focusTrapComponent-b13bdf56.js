import{h as W,fu as X,fw as Z,fx as L,fy as _,fz as ee,fA as O}from"./index-285b86bc.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.3
 */const de=(n,t)=>{const o=n.level?`h${n.level}`:"div";return delete n.level,W(o,{...n},t)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.3
 *//*!
* focus-trap 7.4.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function H(n,t){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);t&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),o.push.apply(o,u)}return o}function U(n){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?H(Object(o),!0).forEach(function(u){te(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(o,u))})}return n}function te(n,t,o){return t=re(t),t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n}function ae(n,t){if(typeof n!="object"||n===null)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var u=o.call(n,t||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function re(n){var t=ae(n,"string");return typeof t=="symbol"?t:String(t)}var q={activateTrap:function(t,o){if(t.length>0){var u=t[t.length-1];u!==o&&u.pause()}var v=t.indexOf(o);v===-1||t.splice(v,1),t.push(o)},deactivateTrap:function(t,o){var u=t.indexOf(o);u!==-1&&t.splice(u,1),t.length>0&&t[t.length-1].unpause()}},ne=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},ie=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},D=function(t){return t.key==="Tab"||t.keyCode===9},oe=function(t){return D(t)&&!t.shiftKey},ue=function(t){return D(t)&&t.shiftKey},M=function(t){return setTimeout(t,0)},Y=function(t,o){var u=-1;return t.every(function(v,c){return o(v)?(u=c,!1):!0}),u},E=function(t){for(var o=arguments.length,u=new Array(o>1?o-1:0),v=1;v<o;v++)u[v-1]=arguments[v];return typeof t=="function"?t.apply(void 0,u):t},C=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ce=[],se=function(t,o){var u=(o==null?void 0:o.document)||document,v=(o==null?void 0:o.trapStack)||ce,c=U({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:oe,isKeyBackward:ue},o),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},h,p=function(e,a,r){return e&&e[a]!==void 0?e[a]:c[r||a]},y=function(e,a){var r=typeof(a==null?void 0:a.composedPath)=="function"?a.composedPath():void 0;return i.containerGroups.findIndex(function(s){var l=s.container,d=s.tabbableNodes;return l.contains(e)||(r==null?void 0:r.includes(l))||d.find(function(b){return b===e})})},F=function(e){var a=c[e];if(typeof a=="function"){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];a=a.apply(void 0,s)}if(a===!0&&(a=void 0),!a){if(a===void 0||a===!1)return a;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var d=a;if(typeof a=="string"&&(d=u.querySelector(a),!d))throw new Error("`".concat(e,"` as selector refers to no known node"));return d},T=function(){var e=F("initialFocus");if(e===!1)return!1;if(e===void 0||!L(e,c.tabbableOptions))if(y(u.activeElement)>=0)e=u.activeElement;else{var a=i.tabbableGroups[0],r=a&&a.firstTabbableNode;e=r||F("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},w=function(){if(i.containerGroups=i.containers.map(function(e){var a=_(e,c.tabbableOptions),r=ee(e,c.tabbableOptions);return{container:e,tabbableNodes:a,focusableNodes:r,firstTabbableNode:a.length>0?a[0]:null,lastTabbableNode:a.length>0?a[a.length-1]:null,nextTabbableNode:function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,b=r.findIndex(function(m){return m===l});if(!(b<0))return d?r.slice(b+1).find(function(m){return O(m,c.tabbableOptions)}):r.slice(0,b).reverse().find(function(m){return O(m,c.tabbableOptions)})}}}),i.tabbableGroups=i.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!F("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},g=function f(e){if(e!==!1&&e!==u.activeElement){if(!e||!e.focus){f(T());return}e.focus({preventScroll:!!c.preventScroll}),i.mostRecentlyFocusedNode=e,ne(e)&&e.select()}},B=function(e){var a=F("setReturnFocus",e);return a||(a===!1?!1:e)},k=function(e){var a=C(e);if(!(y(a,e)>=0)){if(E(c.clickOutsideDeactivates,e)){h.deactivate({returnFocus:c.returnFocusOnDeactivate});return}E(c.allowOutsideClick,e)||e.preventDefault()}},I=function(e){var a=C(e),r=y(a,e)>=0;r||a instanceof Document?r&&(i.mostRecentlyFocusedNode=a):(e.stopImmediatePropagation(),g(i.mostRecentlyFocusedNode||T()))},z=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=C(e);w();var s=null;if(i.tabbableGroups.length>0){var l=y(r,e),d=l>=0?i.containerGroups[l]:void 0;if(l<0)a?s=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:s=i.tabbableGroups[0].firstTabbableNode;else if(a){var b=Y(i.tabbableGroups,function(K){var R=K.firstTabbableNode;return r===R});if(b<0&&(d.container===r||L(r,c.tabbableOptions)&&!O(r,c.tabbableOptions)&&!d.nextTabbableNode(r,!1))&&(b=l),b>=0){var m=b===0?i.tabbableGroups.length-1:b-1,$=i.tabbableGroups[m];s=$.lastTabbableNode}else D(e)||(s=d.nextTabbableNode(r,!1))}else{var P=Y(i.tabbableGroups,function(K){var R=K.lastTabbableNode;return r===R});if(P<0&&(d.container===r||L(r,c.tabbableOptions)&&!O(r,c.tabbableOptions)&&!d.nextTabbableNode(r))&&(P=l),P>=0){var J=P===i.tabbableGroups.length-1?0:P+1,Q=i.tabbableGroups[J];s=Q.firstTabbableNode}else D(e)||(s=d.nextTabbableNode(r))}}else s=F("fallbackFocus");s&&(D(e)&&e.preventDefault(),g(s))},j=function(e){if(ie(e)&&E(c.escapeDeactivates,e)!==!1){e.preventDefault(),h.deactivate();return}(c.isKeyForward(e)||c.isKeyBackward(e))&&z(e,c.isKeyBackward(e))},x=function(e){var a=C(e);y(a,e)>=0||E(c.clickOutsideDeactivates,e)||E(c.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},S=function(){if(i.active)return q.activateTrap(v,h),i.delayInitialFocusTimer=c.delayInitialFocus?M(function(){g(T())}):g(T()),u.addEventListener("focusin",I,!0),u.addEventListener("mousedown",k,{capture:!0,passive:!1}),u.addEventListener("touchstart",k,{capture:!0,passive:!1}),u.addEventListener("click",x,{capture:!0,passive:!1}),u.addEventListener("keydown",j,{capture:!0,passive:!1}),h},G=function(){if(i.active)return u.removeEventListener("focusin",I,!0),u.removeEventListener("mousedown",k,!0),u.removeEventListener("touchstart",k,!0),u.removeEventListener("click",x,!0),u.removeEventListener("keydown",j,!0),h},V=function(e){var a=e.some(function(r){var s=Array.from(r.removedNodes);return s.some(function(l){return l===i.mostRecentlyFocusedNode})});a&&g(T())},A=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(V):void 0,N=function(){A&&(A.disconnect(),i.active&&!i.paused&&i.containers.map(function(e){A.observe(e,{subtree:!0,childList:!0})}))};return h={get active(){return i.active},get paused(){return i.paused},activate:function(e){if(i.active)return this;var a=p(e,"onActivate"),r=p(e,"onPostActivate"),s=p(e,"checkCanFocusTrap");s||w(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=u.activeElement,a==null||a();var l=function(){s&&w(),S(),N(),r==null||r()};return s?(s(i.containers.concat()).then(l,l),this):(l(),this)},deactivate:function(e){if(!i.active)return this;var a=U({onDeactivate:c.onDeactivate,onPostDeactivate:c.onPostDeactivate,checkCanReturnFocus:c.checkCanReturnFocus},e);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,G(),i.active=!1,i.paused=!1,N(),q.deactivateTrap(v,h);var r=p(a,"onDeactivate"),s=p(a,"onPostDeactivate"),l=p(a,"checkCanReturnFocus"),d=p(a,"returnFocus","returnFocusOnDeactivate");r==null||r();var b=function(){M(function(){d&&g(B(i.nodeFocusedBeforeActivation)),s==null||s()})};return d&&l?(l(B(i.nodeFocusedBeforeActivation)).then(b,b),this):(b(),this)},pause:function(e){if(i.paused||!i.active)return this;var a=p(e,"onPause"),r=p(e,"onPostPause");return i.paused=!0,a==null||a(),G(),N(),r==null||r(),this},unpause:function(e){if(!i.paused||!i.active)return this;var a=p(e,"onUnpause"),r=p(e,"onPostUnpause");return i.paused=!1,a==null||a(),w(),S(),N(),r==null||r(),this},updateContainerElements:function(e){var a=[].concat(e).filter(Boolean);return i.containers=a.map(function(r){return typeof r=="string"?u.querySelector(r):r}),i.active&&w(),N(),this}},h.updateContainerElements(t),h};const le=[];function ve(n,t){const{el:o}=n,u=(t==null?void 0:t.focusTrapEl)||o;if(!u)return;const v={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:u,setReturnFocus:c=>(X(c),!1),...t==null?void 0:t.focusTrapOptions,document:o.ownerDocument,tabbableOptions:Z,trapStack:le};n.focusTrap=se(u,v)}function be(n,t){var o;n.focusTrapDisabled||(o=n.focusTrap)==null||o.activate(t)}function pe(n,t){var o;(o=n.focusTrap)==null||o.deactivate(t)}function he(n){var t;(t=n.focusTrap)==null||t.updateContainerElements(n.el)}export{de as H,be as a,ve as c,pe as d,he as u};
